/*! ablejs - v0.2.0 - Wednesday, January 18th, 2017, 2:04:49 PM
* http://www.ablesky.com
* Copyright (c) 2017 frontend@ablesky.com; Licensed  */
function hex_md5(t){return binl2hex(core_md5(str2binl(t),t.length*chrsz))}function b64_md5(t){return binl2b64(core_md5(str2binl(t),t.length*chrsz))}function str_md5(t){return binl2str(core_md5(str2binl(t),t.length*chrsz))}function hex_hmac_md5(t,e){return binl2hex(core_hmac_md5(t,e))}function b64_hmac_md5(t,e){return binl2b64(core_hmac_md5(t,e))}function str_hmac_md5(t,e){return binl2str(core_hmac_md5(t,e))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,o=-271733879,n=-1732584194,s=271733878,a=0;a<t.length;a+=16){var r=i,l=o,c=n,d=s;i=md5_ff(i,o,n,s,t[a+0],7,-680876936),s=md5_ff(s,i,o,n,t[a+1],12,-389564586),n=md5_ff(n,s,i,o,t[a+2],17,606105819),o=md5_ff(o,n,s,i,t[a+3],22,-1044525330),i=md5_ff(i,o,n,s,t[a+4],7,-176418897),s=md5_ff(s,i,o,n,t[a+5],12,1200080426),n=md5_ff(n,s,i,o,t[a+6],17,-1473231341),o=md5_ff(o,n,s,i,t[a+7],22,-45705983),i=md5_ff(i,o,n,s,t[a+8],7,1770035416),s=md5_ff(s,i,o,n,t[a+9],12,-1958414417),n=md5_ff(n,s,i,o,t[a+10],17,-42063),o=md5_ff(o,n,s,i,t[a+11],22,-1990404162),i=md5_ff(i,o,n,s,t[a+12],7,1804603682),s=md5_ff(s,i,o,n,t[a+13],12,-40341101),n=md5_ff(n,s,i,o,t[a+14],17,-1502002290),o=md5_ff(o,n,s,i,t[a+15],22,1236535329),i=md5_gg(i,o,n,s,t[a+1],5,-165796510),s=md5_gg(s,i,o,n,t[a+6],9,-1069501632),n=md5_gg(n,s,i,o,t[a+11],14,643717713),o=md5_gg(o,n,s,i,t[a+0],20,-373897302),i=md5_gg(i,o,n,s,t[a+5],5,-701558691),s=md5_gg(s,i,o,n,t[a+10],9,38016083),n=md5_gg(n,s,i,o,t[a+15],14,-660478335),o=md5_gg(o,n,s,i,t[a+4],20,-405537848),i=md5_gg(i,o,n,s,t[a+9],5,568446438),s=md5_gg(s,i,o,n,t[a+14],9,-1019803690),n=md5_gg(n,s,i,o,t[a+3],14,-187363961),o=md5_gg(o,n,s,i,t[a+8],20,1163531501),i=md5_gg(i,o,n,s,t[a+13],5,-1444681467),s=md5_gg(s,i,o,n,t[a+2],9,-51403784),n=md5_gg(n,s,i,o,t[a+7],14,1735328473),o=md5_gg(o,n,s,i,t[a+12],20,-1926607734),i=md5_hh(i,o,n,s,t[a+5],4,-378558),s=md5_hh(s,i,o,n,t[a+8],11,-2022574463),n=md5_hh(n,s,i,o,t[a+11],16,1839030562),o=md5_hh(o,n,s,i,t[a+14],23,-35309556),i=md5_hh(i,o,n,s,t[a+1],4,-1530992060),s=md5_hh(s,i,o,n,t[a+4],11,1272893353),n=md5_hh(n,s,i,o,t[a+7],16,-155497632),o=md5_hh(o,n,s,i,t[a+10],23,-1094730640),i=md5_hh(i,o,n,s,t[a+13],4,681279174),s=md5_hh(s,i,o,n,t[a+0],11,-358537222),n=md5_hh(n,s,i,o,t[a+3],16,-722521979),o=md5_hh(o,n,s,i,t[a+6],23,76029189),i=md5_hh(i,o,n,s,t[a+9],4,-640364487),s=md5_hh(s,i,o,n,t[a+12],11,-421815835),n=md5_hh(n,s,i,o,t[a+15],16,530742520),o=md5_hh(o,n,s,i,t[a+2],23,-995338651),i=md5_ii(i,o,n,s,t[a+0],6,-198630844),s=md5_ii(s,i,o,n,t[a+7],10,1126891415),n=md5_ii(n,s,i,o,t[a+14],15,-1416354905),o=md5_ii(o,n,s,i,t[a+5],21,-57434055),i=md5_ii(i,o,n,s,t[a+12],6,1700485571),s=md5_ii(s,i,o,n,t[a+3],10,-1894986606),n=md5_ii(n,s,i,o,t[a+10],15,-1051523),o=md5_ii(o,n,s,i,t[a+1],21,-2054922799),i=md5_ii(i,o,n,s,t[a+8],6,1873313359),s=md5_ii(s,i,o,n,t[a+15],10,-30611744),n=md5_ii(n,s,i,o,t[a+6],15,-1560198380),o=md5_ii(o,n,s,i,t[a+13],21,1309151649),i=md5_ii(i,o,n,s,t[a+4],6,-145523070),s=md5_ii(s,i,o,n,t[a+11],10,-1120210379),n=md5_ii(n,s,i,o,t[a+2],15,718787259),o=md5_ii(o,n,s,i,t[a+9],21,-343485551),i=safe_add(i,r),o=safe_add(o,l),n=safe_add(n,c),s=safe_add(s,d)}return Array(i,o,n,s)}function md5_cmn(t,e,i,o,n,s){return safe_add(bit_rol(safe_add(safe_add(e,t),safe_add(o,s)),n),i)}function md5_ff(t,e,i,o,n,s,a){return md5_cmn(e&i|~e&o,t,e,n,s,a)}function md5_gg(t,e,i,o,n,s,a){return md5_cmn(e&o|i&~o,t,e,n,s,a)}function md5_hh(t,e,i,o,n,s,a){return md5_cmn(e^i^o,t,e,n,s,a)}function md5_ii(t,e,i,o,n,s,a){return md5_cmn(i^(e|~o),t,e,n,s,a)}function core_hmac_md5(t,e){var i=str2binl(t);i.length>16&&(i=core_md5(i,t.length*chrsz));for(var o=Array(16),n=Array(16),s=0;16>s;s++)o[s]=909522486^i[s],n[s]=1549556828^i[s];var a=core_md5(o.concat(str2binl(e)),512+e.length*chrsz);return core_md5(n.concat(a),640)}function safe_add(t,e){var i=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(i>>16);return o<<16|65535&i}function bit_rol(t,e){return t<<e|t>>>32-e}function str2binl(t){for(var e=Array(),i=(1<<chrsz)-1,o=0;o<t.length*chrsz;o+=chrsz)e[o>>5]|=(t.charCodeAt(o/chrsz)&i)<<o%32;return e}function binl2str(t){for(var e="",i=(1<<chrsz)-1,o=0;o<32*t.length;o+=chrsz)e+=String.fromCharCode(t[o>>5]>>>o%32&i);return e}function binl2hex(t){for(var e=hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<4*t.length;o++)i+=e.charAt(15&t[o>>2]>>8*(o%4)+4)+e.charAt(15&t[o>>2]>>8*(o%4));return i}function binl2b64(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=0;o<4*t.length;o+=3)for(var n=(255&t[o>>2]>>8*(o%4))<<16|(255&t[o+1>>2]>>8*((o+1)%4))<<8|255&t[o+2>>2]>>8*((o+2)%4),s=0;4>s;s++)i+=8*o+6*s>32*t.length?b64pad:e.charAt(63&n>>6*(3-s));return i}"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,o,n,s,a,r=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;s>i;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,n}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;s>i;i+=1)"string"==typeof rep[i]&&(o=rep[i],n=str(o,l),n&&a.push(quote(o)+(gap?": ":":")+n));else for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n=str(o,l),n&&a.push(quote(o)+(gap?": ":":")+n));return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf?this.valueOf():{}});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;i>o;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,o,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=walk(n,i),void 0!==o?n[i]=o:delete n[i]);return reviver.call(t,e,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("lib/shiv/json2",function(){}),jQuery.cookie=function(t,e,i){if(arguments.length>1&&"[object Object]"!==String(e)){if(i=jQuery.extend({},i),(null===e||void 0===e)&&(i.expires=-1),"number"==typeof i.expires){var o=i.expires,n=i.expires=new Date;n.setDate(n.getDate()+o)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",i.raw?e:encodeURIComponent(e),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=e||{};var s,a=i.raw?function(t){return t}:decodeURIComponent;return(s=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?a(s[1]):null},define("lib/jquery/jquery.cookie",function(){}),function(t){t.fn.toFixedWidth=function(e,i,o){if(!e)return"";var n,s=e.toString().replace(/\s+/g," "),a=/^[A-Za-z0-9]+$/i,r=/[\u4E00-\u9FA5]+/i,l=s.length,c=0,d=1;if(o||(o=""),r.test(s)){for(var u=0;l>u;u++){n=s.charAt(u),c+=a.test(n)?.5:1;var h=Math.ceil(c);h==i&&(d=u+1)}var p=i-c;0>p&&(s=c>i?s.substr(0,d)+o:s.substr(0,i)+o),t.fn.toFixedWidth.fixedLength=c>i?i:0==c?Math.ceil(l/2):c}else i*=2,c=l,d=l>i?i:l,t.fn.toFixedWidth.fixedLength=c>i?i/2:Math.ceil(l/2),s=c>i?s.substr(0,d)+o:s.substr(0,d);return s},t.fn.toFixedWidth.fixedLength=0}(jQuery),define("lib/jquery/jquery.fixedwidth",function(){}),function(){function t(t){function e(e,o){var s,d,m=e==window,v=o&&void 0!==o.message?o.message:void 0;if(o=t.extend({},t.blockUI.defaults,o||{}),!o.ignoreIfBlocked||!t(e).data("blockUI.isBlocked")){if(o.overlayCSS=t.extend({},t.blockUI.defaults.overlayCSS,o.overlayCSS||{}),s=t.extend({},t.blockUI.defaults.css,o.css||{}),d=t.extend({},t.blockUI.defaults.themedCSS,o.themedCSS||{}),v=void 0===v?o.message:v,m&&p&&i(window,{fadeOut:0}),v&&"string"!=typeof v&&(v.parentNode||v.jquery)){var g=v.jquery?v[0]:v,b={};t(e).data("blockUI.history",b),b.el=g,b.parent=g.parentNode,b.display=g.style.display,b.position=g.style.position,b.parent&&b.parent.removeChild(g)}t(e).data("blockUI.onUnblock",o.onUnblock);var w,y,x=o.baseZ,k=t.browser.msie||o.forceIframe?t('<iframe class="blockUI" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+o.iframeSrc+'"></iframe>'):t('<div class="blockUI" style="display:none"></div>'),_=o.theme?t('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+x++ +';display:none"></div>'):t('<div class="blockUI blockOverlay" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');y=o.theme&&m?'<div class="blockUI '+o.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:fixed">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":o.theme?'<div class="blockUI '+o.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:absolute">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(o.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":m?'<div class="blockUI '+o.blockMsgClass+' blockPage" style="z-index:'+(x+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+o.blockMsgClass+' blockElement" style="z-index:'+(x+10)+';display:none;position:absolute"></div>',w=t(y),v&&(o.theme?(w.css(d),w.addClass("ui-widget-content")):w.css(s)),o.theme||o.applyPlatformOpacityRules&&t.browser.mozilla&&/Linux/.test(navigator.platform)||_.css(o.overlayCSS),_.css("position",m?"fixed":"absolute"),(t.browser.msie||o.forceIframe)&&k.css("opacity",0);var T=[k,_,w],I=m?t("body"):t(e);t.each(T,function(){this.appendTo(I)}),o.theme&&o.draggable&&t.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var C=u&&(!t.boxModel||t("object,embed",m?null:e).length>0);if(h||C){if(m&&o.allowBodyStretch&&t.boxModel&&t("html,body").css("height","100%"),(h||!t.boxModel)&&!m)var S=l(e,"borderTopWidth"),E=l(e,"borderLeftWidth"),j=S?"(0 - "+S+")":0,A=E?"(0 - "+E+")":0;t.each([k,_,w],function(t,e){var i=e[0].style;if(i.position="absolute",2>t)m?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+o.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?i.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),A&&i.setExpression("left",A),j&&i.setExpression("top",j);else if(o.centerY)m&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!o.centerY&&m){var n=o.css&&o.css.top?parseInt(o.css.top):0,s="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"';i.setExpression("top",s)}})}if(v&&(o.theme?w.find(".ui-widget-content").append(v):w.append(v),(v.jquery||v.nodeType)&&t(v).show()),(t.browser.msie||o.forceIframe)&&o.showOverlay&&k.show(),o.fadeIn){var U=o.onBlock?o.onBlock:c,R=o.showOverlay&&!v?U:c,q=v?U:c;o.showOverlay&&_._fadeIn(o.fadeIn,R),v&&w._fadeIn(o.fadeIn,q)}else o.showOverlay&&_.show(),v&&w.show(),o.onBlock&&o.onBlock();if(n(1,e,o),m?(p=w[0],f=t(":input:enabled:visible",p),o.focusInput&&setTimeout(a,20)):r(w[0],o.centerX,o.centerY),o.timeout){var O=setTimeout(function(){m?t.unblockUI(o):t(e).unblock(o)},o.timeout);t(e).data("blockUI.timeout",O)}}}function i(e,i){var s=e==window,a=t(e),r=a.data("blockUI.history"),l=a.data("blockUI.timeout");l&&(clearTimeout(l),a.removeData("blockUI.timeout")),i=t.extend({},t.blockUI.defaults,i||{}),n(0,e,i),null===i.onUnblock&&(i.onUnblock=a.data("blockUI.onUnblock"),a.removeData("blockUI.onUnblock"));var c;c=s?t("body").children().filter(".blockUI").add("body > .blockUI"):t(".blockUI",e),s&&(p=f=null),i.fadeOut?(c.fadeOut(i.fadeOut),setTimeout(function(){o(c,r,i,e)},i.fadeOut)):o(c,r,i,e)}function o(e,i,o,n){e.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),t(n).removeData("blockUI.history")),"function"==typeof o.onUnblock&&o.onUnblock(n,o)}function n(e,i,o){var n=i==window,a=t(i);if((e||(!n||p)&&(n||a.data("blockUI.isBlocked")))&&(a.data("blockUI.isBlocked",e),o.bindEvents&&(!e||o.showOverlay))){var r="mousedown mouseup keydown keypress";e?t(document).bind(r,o,s):t(document).unbind(r,s)}}function s(e){if(e.keyCode&&9==e.keyCode&&p&&e.data.constrainTabKey){var i=f,o=!e.shiftKey&&e.target===i[i.length-1],n=e.shiftKey&&e.target===i[0];if(o||n)return setTimeout(function(){a(n)},10),!1}var s=e.data;return t(e.target).parents("div."+s.blockMsgClass).length>0?!0:0==t(e.target).parents().children().filter("div.blockUI").length}function a(t){if(f){var e=f[t===!0?f.length-1:0];e&&e.focus()}}function r(t,e,i){var o=t.parentNode,n=t.style,s=(o.offsetWidth-t.offsetWidth)/2-l(o,"borderLeftWidth"),a=(o.offsetHeight-t.offsetHeight)/2-l(o,"borderTopWidth");e&&(n.left=s>0?s+"px":"0"),i&&(n.top=a>0?a+"px":"0")}function l(e,i){return parseInt(t.css(e,i))||0}if(/1\.(0|1|2)\.(0|1|2)/.test(t.fn.jquery)||/^1.1/.test(t.fn.jquery))return alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+t.fn.jquery),void 0;t.fn._fadeIn=t.fn.fadeIn;var c=function(){},d=document.documentMode||0,u=t.browser.msie&&(t.browser.version<8&&!d||8>d),h=t.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!d;t.blockUI=function(t){e(window,t)},t.unblockUI=function(t){i(window,t)},t.growlUI=function(e,i,o,n){var s=t('<div class="growlUI"></div>');e&&s.append("<h1>"+e+"</h1>"),i&&s.append("<h2>"+i+"</h2>"),void 0==o&&(o=3e3),t.blockUI({message:s,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:o,showOverlay:!1,onUnblock:n,css:t.blockUI.defaults.growlCSS})},t.fn.block=function(i){var o=t.extend({},t.blockUI.defaults,i||{});return this.each(function(){var e=t(this);o.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==t.css(this,"position")&&(this.style.position="relative"),t.browser.msie&&(this.style.zoom=1),e(this,i)})},t.fn.unblock=function(t){return this.each(function(){i(this,t)})},t.blockUI.version=2.42,t.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var p=null,f=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define("lib/jquery/jquery.blockui",["jquery"],t):t(jQuery)}(),function(){var t=function(t){var e=t,i="",o="",n=HTTP_SERVER+"message.do?action=saveMessage",s={},a="jsonp";"[object Object]"===Object.prototype.toString.call(t)&&(s=t,e=s.username,i=s.msg||i,o=s.title||o,n=s.saveUrl||n,a=s.dataType||a);var r=['<i class="lt">&nbsp;</i><i class="rt">&nbsp;</i><i class="lb">&nbsp;</i><i class="rb">&nbsp;</i>','<div class="hd"><h3>发送私信</h3><i class="close overlay-close">&nbsp;</i></div>','<div class="bd">','<form id="J_sendLetterForm" method="post" action="message.do?action=saveMessage"><fieldset>',"<dl><dt>收信人：</dt>","<dd>",'<input type="text" autocomplete="off" tabindex="0" class="field" name="username" id="J_olEnterUsername" value="'+e+'" disabled="disabled" />','<label for="J_olEnterUsername" class="empty-text" style="display: none;">输入用户名</label>',"</dd></dl>",'<dl><dt>标题：<span class="num" style="',""!==o?"display: none;":"",'">剩余<em class="textnum-title">',20-o.length,"</em>个汉字</span></dt>","<dd>",'<input type="text" autocomplete="off" tabindex="0" maxlength="40" class="field" name="title"  id="J_olEnterTitle"  value="',o,'" ',""!==o?'disabled="disabled"':"","/>",'<label for="J_olEnterTitle" class="empty-text" style="',""!==o?"display: none;":"",'">最多20个汉字</label>',"</dd></dl>",'<dl><dt>内容：<span class="num">剩余<em class="textnum-content">',3e3-i.length,"</em>个汉字</span></dt>","<dd>",'<textarea type="text" onresize="return false;" autocomplete="off" tabindex="0" class="field" name="password" id="J_olTextarea">',i,"</textarea>",'<label for="J_olTextarea" class="empty-text" style="',""!==i?"display: none;":"",'">最多3000个汉字</label>',"</dd></dl>",'<div class="clearfix" style="padding-bottom: 20px;">','<a id="J_submitLetter" class="btn-send-letter" href="javascript:;">发送私信</a>','<a class="btn-unblock overlay-close" href="javascript:;">取消</a>','<span class="submitting">正在提交...</span>',"</div>","</fieldset><form></div>"];$("#J_popPriLetter").html(r.join("")),$(".overlay-letter .field").bind({focus:function(){$(this).removeClass("field-invalid").next("label.empty-text").hide()},blur:function(){this.value||$(this).addClass("field-invalid").next("label.empty-text").show()}}),$(".overlay-letter .overlay-close").click(function(){$.unblockUI()});var l=($("#J_sendLetterForm"),$("#J_submitLetter")),c=function(){var t=$("#J_olEnterTitle:input").val(),e=$("#J_olTextarea").val();return t&&e?!0:(t||$("#J_olEnterTitle").addClass("field-invalid"),e||$("#J_olTextarea").addClass("field-invalid"),!1)};$("#J_olEnterUsername:input").bind({keyup:function(){$(this).val(this.value.replace(/[^\w\u4E00-\u9FA5]/g,""))}}),$("#J_olEnterTitle:input").bind({keyup:function(){var t=$(this);t.val(t.toFixedWidth(t.val(),20)),$("#J_sendLetterForm .textnum-title").html(20-Math.ceil($.fn.toFixedWidth.fixedLength))}}),$("#J_olTextarea:input").bind({keyup:function(){var t=$(this);t.val(t.toFixedWidth(t.val(),3e3)),$("#J_sendLetterForm .textnum-content").html(3e3-Math.ceil($.fn.toFixedWidth.fixedLength))}}),l.click(function(t){t.preventDefault();var i=l.attr("isSubmiting");if(c()){if("true"==i)return;l.html("正在提交").attr("isSubmiting","true"),$(".overlay-letter .submitting").show(),$.ajax({url:n,dataType:a,type:"POST",data:{username:e,subject:$("#J_olEnterTitle:input").val(),msg:$("#J_olTextarea").val()},success:function(t){$(".overlay-letter .submitting").hide();var e;t.success?($("#J_popPriLetter .bd").html('<p style="padding: 20px 0;">你的信件发送成功，该窗口将在<span id="J_letterTimer">2</span>秒后自动关闭。<p>'),e=window.setTimeout($.unblockUI,2e3)):($("#J_popPriLetter .bd").html('<p style="color: red; padding: 20px 0;">'+t.message+'，该窗口将在<span id="J_letterTimer">5</span>秒后自动关闭。<p>'),e=window.setTimeout($.unblockUI,5e3))},error:function(){l.html("发送私信").attr("isSubmiting","false"),$(".overlay-letter .submitting").hide()}})}})};"function"==typeof define&&define.amd&&define.amd.jQuery?define("common/module-letter",["common/global","lib/jquery/jquery.fixedwidth","lib/jquery/jquery.blockui"],function(){return{init:t}}):(window.AUI=window.AUI||{},window.AUI.letter={},window.AUI.letter.init=t)}(),function(){var t="function"==typeof define&&define.amd&&define.amd.jQuery,e="coursePackageCookieID";$siteNav=$("#J_siteNav");var i=function(t,i){if(!t&&0!==t)throw new Error('arguments "courseIds" is required!');$.ajax({url:HTTP_SERVER+"shoppingCart.do?action=addCartItem",dataType:"jsonp",data:{cookieId:e,courseIds:t},success:function(t){t.success?o(i):alert(t.message)}})},o=function(t){$.ajax({url:HTTP_SERVER+"shoppingCart.do?action=showCartInfo",dataType:"jsonp",data:{cookieId:e},success:function(e){e.success&&n(e),$.isFunction(t)&&t(e)}})},n=function(e){t?require(["common/site-nav"],function(t){t.refreshCartInfo(e)}):AUI.siteNav.refreshCartInfo(e)},s={add:i,getItems:o};"function"==typeof define&&define.amd&&define.amd.jQuery?define("course/module-cart",["common/global"],function(){return s}):(window.AUI=window.AUI||{},AUI.cart=s)}(),function(t){var e="function"==typeof define&&define.amd&&define.amd.jQuery,i=t("#J_siteNav"),o=t(".account",i),n=Boolean(t("#J_college").val())||!1,s=t(".trigger-wrapper",i);if(i.get(0)){var a=function(){return i.height()},r=function(){window.Ext?popUpSignInWin():require(["common/global"],function(t){t.switchToLoginPage()})};if(e){var l=encodeURIComponent(window.location.href),c=(isAbleskyDomain?HTTP_SERVER:"/")+"registerRedirect.do?action=toRegister&fromurl="+l;n===!0?t(".account-register",o).attr("href","collegeRedirect.do?action=toRegister&fromurl="+l):t(".account-register",o).click(function(t){t.preventDefault(),window.location.href=c})}else t(".account-register",o).click(function(t){t.preventDefault(),popUpCreateAccWin()});!function(){s.on({mouseover:function(){clearTimeout(this._timeout);var e=t(this),i=e.attr("data-control-width"),o=t("menu",e).siblings("a").innerWidth(),n=t("menu",e).innerWidth(),s=Math.max(o,n),a=i?i:s;e.addClass("trigger-wrapper-hover"),t("menu",e).width(a)},mouseout:function(){var e=t(this);this._timeout=setTimeout(function(){e.removeClass("trigger-wrapper-hover")},50)}})}(),function(){var e=t(".contact-cs",i),o=t("#BizQQWPA4SiteNav");window.BizQQWPA&&(BizQQWPA.addCustom({aty:"2",a:"0",nameAccount:800042429,selector:"BizQQWPA4SiteNav"}),o.removeClass("qqSaleOff")),e.on("mouseover",function(){return window.BizQQWPA?(o.hasClass("qqSaleOff")&&(BizQQWPA.addCustom({aty:"2",a:"0",nameAccount:800042429,selector:"BizQQWPA4SiteNav"}),o.removeClass("qqSaleOff")),void 0):(this.pms&&"padding"===this.pms.state()||(this.pms=t.ajax({url:"http://wpa.b.qq.com/cgi/wpa.php",dataType:"script",scriptCharset:"utf-8"}).done(function(){BizQQWPA.addCustom({aty:"2",a:"0",nameAccount:800042429,selector:"BizQQWPA4SiteNav"}),o.removeClass("qqSaleOff")})),void 0)})}();var d=function(e){t(".cart-num").show().text("("+e.totalCourseCnt+")")};e?require(["course/module-cart"],function(t){t.getItems()}):AUI.cart.getItems();var u={popLogin:r,getNavHeight:a,refreshCartInfo:d};e?define("common/site-nav",["jquery","common/global"],function(){return u}):(window.AUI=window.AUI||{},window.AUI.siteNav=u)}}(jQuery),function(){function t(){window._gaq=[],_gaq.push(["_setAccount","UA-6709005-1"]),_gaq.push(["_trackPageview"]),_gaq.push(["_setDomainName",window.location.hostname]);var t="hm.baidu.com/h.js?2c3784f03626d6f26635da62b9bfad4f",i="https:"==document.location.protocol?" https://":" http://",o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+t;var n=document.getElementsByTagName("script")[0];return n.parentNode.insertBefore(o,n),e?{}:void 0}var e="function"==typeof define&&define.amd&&define.amd.jQuery;e&&!window.Ext?define("common/ablesky-ga",["jquery","common/global"],t):t()}(window.jQuery),function(){function t(t){function i(){for(var t=location.href.toLowerCase(),e=0,i=n.length;i>e;e+=1)if(t.indexOf(n[e])>-1)return!0;return!1}function o(t){var e="log_img_"+(new Date).getTime(),i=new Image;window[e]=i,i.onload=i.onerror=function(){try{delete window[e]}catch(t){window[e]=null}},i.src=t,i=null}var n=["alpha.ablesky.com","beta.ablesky.com","omega.ablesky.com","gamma.ablesky.com","ablesky-a.com","localhost","127.0.0.1"],s=location.search.indexOf("analyticsTest=true")>-1;if(!i()||s){var a="http://stat.analytics.ablesky.com/statc/images/init/p.gif",r={},l=AUI.curUserInfo||{},c=window.ableanalyticsParams,d={},u={};if(c)d=c.orgInfo||d,u=c.courseInfo||u;else if(t&&t.config){var h=t.config();d=h.orgInfo||d,u=h.courseInfo||u}d.orgId&&(r.orgId=d.orgId),u.courseId&&(r.courseId=u.courseId),u.viewCourseId&&(r.viewCourseId=u.viewCourseId),l.username&&(r.u=l.username),l.isInternal===!0&&(r.itnl=!0),l.isAverageUser===!1&&"GUEST"!=l.username&&(r.noru=!1);var p=[];for(var f in r)(r[f]||0===r[f])&&p.push(f+"="+encodeURIComponent(r[f]));p.push("_="+(new Date).getTime());var m=a+"?"+p.join("&");return o(m),e?{}:void 0}}var e="function"==typeof define&&define.amd&&define.amd.jQuery;e&&!window.Ext?define("analytics/ableanalytics",["module","jquery","common/global"],t):t()}(window.jQuery),function(t){function e(){var e=this;this._onbox=!1,this._opening=!1,this.zIndex=1e4,this.length=function(){return o.length},this.open=function(t){if(e._opening=!0,"undefined"==typeof t&&(t={}),t.boxid)for(var i=0;i<o.length;i++)if(o[i].dh.attr("id")==t.boxid){o[i].close();break}t.zIndex=e.zIndex,e.zIndex+=10;var n=new s(t);return n.dh.click(function(){e._onbox=!0}),o.push(n),"center"!=n.options.position&&n.setElementPosition(),n.mh&&n.mh.css({width:n.bwidth(),height:n.bheight()}),n},this.close=function(){var t=this.getTopBox();0!=t&&t.close()},this.getTopBox=function(){return o.length>0?o[o.length-1]:!1},t(window).scroll(function(){if(o.length>0)for(i=0;i<o.length;i++){var t=o[i];"center"!=t.options.position&&t.setElementPosition(),t.mh&&t.mh.css({width:t.bwidth(),height:t.bheight()})}}).resize(function(){if(o.length>0){var t=e.getTopBox();t.mh&&t.mh.css({width:t.bwidth(),height:t.bheight()})}}),t(document).click(function(t){if(2==t.button)return!0;if(o.length>0){var i=e.getTopBox();e._opening||e._onbox||!i.options.clickClose||i.close()}e._opening=!1,e._onbox=!1})}var o=[],n=function(){for(var t,e=0;t=arguments[e];e++)if("string"==typeof t&&t.length>0)try{(new Image).src=t}catch(i){}};n(IMG_PATH+"/market/dialog/dialog-tl.png",IMG_PATH+"/market/dialog/dialog-tr.png",IMG_PATH+"/market/dialog/dialog-bl.png",IMG_PATH+"/market/dialog/dialog-br.png",IMG_PATH+"/market/dialog/dialog-square.png");var s=function(e){var n=this;this.options={},this.dh=null,this.mh=null,this.dc=null,this.df=null,this.db=null,this.selector=null,this.ajaxurl=null,this._dragging=!1,this._options=e||{},this._content=e.content||"",this.event={},this._defaults={boxid:null,boxclass:null,title:"",headStyle:"",bodyStyle:"",footStyle:"",width:0,height:0,timeout:0,draggable:!0,modal:!1,position:"center",buttons:[],clickClose:!1,zIndex:1e4,close:null,closeOnEscape:!0,open:null},this.initOptions=function(){n._options=n._options||{},n._options.title=n._options.title||"",n._options.boxclass=n._options.boxclass,n.options=t.extend({},n._defaults,n._options),n._options=null,n._defaults=null},this.initBox=function(){var e=['<div class="dialog-box">','<table class="dialog-table">',"<tr>",'<td class="td-tl"></td>','<td class="td-mm"></td>','<td class="td-tr"></td>',"</tr>","<tr>",'<td class="td-mm"></td>','<td class="td-content">','<div class="dialog-header">','<h3 class="dialog-title"></h3>','<a title="关闭" class="dialog-close">×</a>',"</div>",'<div class="dialog-content"></div>','<div class="dialog-button-container"></div>',"</td>",'<td class="td-mm"></td>',"</tr>","<tr>",'<td class="td-bl"></td>','<td class="td-mm"></td>','<td class="td-br"></td>',"</tr>","</table>","</div>"].join("");n.dh=t(e).appendTo("body").css({position:"absolute",overflow:"hidden",zIndex:n.options.zIndex}),n.dc=n.find(".dialog-content"),n.dt=n.find(".dialog-title"),n.dr=n.find(".dialog-header"),n.db=n.find(".dialog-button-container"),n.options.boxid&&n.dh.attr("id",n.options.boxid),n.options.boxclass&&n.dh.addClass(n.options.boxclass),n.options.height>0&&n.dc.css("height",n.options.height),n.options.width>0&&n.dh.css("width",n.options.width),"object"==typeof n.options.headStyle&&n.dr.css(t.extend({},n.options.headStyle)),"object"==typeof n.options.bodyStyle&&n.dc.css(t.extend({},n.options.bodyStyle)),"object"==typeof n.options.footStyle&&n.db.css(t.extend({},n.options.footStyle)),n.dh.bgiframe()},this.initMask=function(){n.options.modal&&(t.browser.msie?(h="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,w="CSS1Compat"==document.compatMode?document.documentElement.clientWidth:document.body.clientWidth):(h=n.bheight(),w=n.bwidth()),n.mh=t('<div class="dialog-mask"></div>').appendTo("body").css({width:w,height:h,zIndex:n.options.zIndex-1}).bgiframe())},this.initContent=function(){for(var e,i,o=n.options.buttons,s=0;i=o[s];s++)e=document.createElement("button"),e._click=i.click?i.click:n.close,i.css&&i.css.backgroundColor&&(i.css.color="#fff"),t(e).attr("type","button").text(i.text).css(t.extend({},{marginLeft:s>0?30:0},i.css)).click(function(t){t.preventDefault(),this._click()}),n.db.append(e);n.options.title?n.dt.html(n.options.title):n.dt.hide(),0===n.options.buttons.length&&n.dh.find(".dialog-button-container").hide(),n.setContent(n._content),n.show(),n.event.open()},this.initEvent=function(){n.dh.find(".dialog-close, .dialog-cancel").unbind("click").click(function(t){t.preventDefault(),n.close()}),n.dh.attr("tabIndex",-1).css("outline",0).keydown(function(t){n.options.closeOnEscape&&t.keyCode&&27===t.keyCode&&(n.close(t),t.preventDefault())}),n.options.timeout>0&&window.setTimeout(n.close,1e3*n.options.timeout),this.drag()},this.setOnclose=function(t){n.options.close=t},this.drag=function(){n.options.draggable&&n.options.title&&n.dr.css({cursor:"move"}).mousedown(function(e){var i=this,o=n.dh.position().left,s=n.dh.position().top,a=e.clientX,r=e.clientY,l=n.dh.width(),c=n.dh.height(),d=n.bwidth(),u=n.bheight();i.setCapture&&i.setCapture(),t(document).mousemove(function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var e=Math.max(o+t.clientX-a,0),i=Math.max(s+t.clientY-r,0),e=Math.min(e,d-l),i=Math.min(i,u-c);n.dh.css({left:e,top:i})}).mouseup(function(){i.releaseCapture&&i.releaseCapture(),t(document).unbind("mousemove"),t(document).unbind("mouseup")})})},this.event.open=function(){"function"==typeof n.options.open&&n.options.open(n)},this.show=function(){n.options.buttons.length>0&&n.dh.find(".dialog-button-container").show(),"center"==n.options.position?n.setCenterPosition():n.setElementPosition(),n.dh.show(),n.mh&&n.mh.show()},this.hide=function(t){n.dh.hide(t)
},this.find=function(t){return n.dh.find(t)},this.setWidth=function(t){n.dh.width(t)},this.setTitle=function(t){n.dt.html(t)},this.getTitle=function(){return n.dt.html()},this.setContent=function(t){n.dc.html(t),n.setCenterPosition()},this.getContent=function(){return n.dc.html()},this.close=function(){for("function"==typeof n.options.close&&n.options.close(n),i=0;i<o.length;i++)if(o[i].dh.get(0)==n.dh.get(0)){o.splice(i,1);break}n.hide(),n.dh.remove(),n.mh&&n.mh.remove()},this.bheight=function(){if(t.browser.msie&&t.browser.version<7){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return i>e?t(window).height():e}return t(document).height()},this.bwidth=function(){if(t.browser.msie&&t.browser.version<7){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return i>e?t(window).width():e}return t(document).width()},this.setCenterPosition=function(){var e=t(window),i=t(document),o=i.scrollTop(),s=i.scrollLeft();o+=(e.height()-n.dh.height())/2,s+=(e.width()-n.dh.width())/2,n.dh.css({top:o,left:s})},this.setElementPosition=function(){var e=t(n.options.position.refele),i=n.options.position.reftop||0,o=n.options.position.refleft||0,s="undefined"==typeof n.options.position.adjust?!0:n.options.position.adjust,a=e.offset().top+e.height(),r=e.offset().left,l=document.documentElement.clientWidth||document.body.clientWidth,c=document.documentElement.clientHeight||document.body.clientHeight,d=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=d+c,p=u+l;s&&r+n.dh.width()>p&&(r=p-n.dh.width()-1),s&&a+n.dh.height()>h&&(a=h-n.dh.height()-1),r=Math.max(r+o,0),a=Math.max(a+i,0),n.dh.css({top:a,left:r})},this.initOptions(),this.initMask(),this.initBox(),this.initContent(),this.initEvent()};t.extend({dialog:(new e).open})}(jQuery),function(t){function e(t){return t&&t.constructor===Number?t+"px":t}t.fn.bgiframe=t.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(i){i=t.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},i);var o='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+i.src+'"'+'style="display:block;position:absolute;z-index:-1;'+(i.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==i.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":e(i.top))+";"+"left:"+("auto"==i.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":e(i.left))+";"+"width:"+("auto"==i.width?"expression(this.parentNode.offsetWidth+'px')":e(i.width))+";"+"height:"+("auto"==i.height?"expression(this.parentNode.offsetHeight+'px')":e(i.height))+";"+'"/>';return this.each(function(){0===t(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(o),this.firstChild)})}:function(){return this},t.fn.bgIframe=t.fn.bgiframe}(jQuery),define("lib/jquery/jquery.dialog",function(){});var hexcase=0,b64pad="",chrsz=8;define("common/md5",function(){}),define("common/module-login",["common/global","lib/jquery/jquery.cookie","common/md5"],function(t){function e(){var e=t.queryString("funName"),i=t.queryString("params");e&&(AUI.cookie(!1,"funName",e),AUI.cookie(!1,"params",i))}function i(t){$.ajax({url:PASSPORT_SERVER+"check.do?action=check",dataType:"jsonp",success:function(e){var i=e.ASUSS;e.success&&"string"==typeof i.toLowerCase()&&""!=i&&"false"!=i&&(AUI.getCurUserInfo(!0,i),o(t))}})}function o(i){i||(i={});var o=d.iP,r="boolean"==typeof d.iI?d.iI:!1,l=window.location.href,c=l.split("fromurl=")[1],u="http://"+window.location.host,h=parseInt(t.queryString("courseId"))||0,p=parseInt(t.queryString("pcid"))||0;i.isBinded===!1?(c=window.location.href.split("fromurl=")[1],window.location.href="/accountLoginRedirect.do?action=toBindingAccount"+(c?"&fromurl="+c:"")):$.isFunction(n.callback)?n.callback():o?d.successURL?location.href=d.successURL:window.location.reload():"trial"==s&&h?window.location.href=BASE_PATH+"viewCourseDetail.do?courseId="+(p||h):"internal"==a||r?window.location.href=BASE_PATH+"myOffice.do":c&&""!==c?(e(),window.location.href=window.unescape(c)):window.location.href=HTTP_SERVER.indexOf(u)>-1||SEARCH_SERVER.indexOf(u)>-1||AD_SERVER.indexOf(u)>-1||PASSPORT_SERVER.indexOf(u)>-1?SEARCH_SERVER+"course.do?aft=recommend":BASE_PATH+"myOffice.do"}var n={},s=t.queryString("pt"),a=$("#J_loginType").val(),r="SA",l=AUI.cookie(!0,r)?AUI.cookie(!0,r):"",c="internal"==a?l.indexOf("*")>-1?l.split("*")[0]:l:l,d={},u=function(t){function e(t){var e=m.parents("form").find("#J_errerTip"),i=t-0;switch(i){case 1:i="用户名或密码为空";break;case 101:i="用户名或密码错误";break;case 102:i="无法登陆到客户端";break;case 107:i="账号冻结";break;default:i="登录出错码："+i}m.isSubmiting=!1,e.children("p").html(i),e.show(),$("span",m).html("立即登录"),n.loginError&&n.loginError()}function l(){var t=f[0];t.checked?AUI.cookie(!0,r,v.val()):AUI.cookie(!0,r,null)}document.getElementById("J_loginMod")&&document.getElementById("J_loginMod").reset(),n=t=$.extend({},t);var u=n.loginPanel,h=!!n.isPop,p=!!n.isOneStepLogin,f=$('input[name="_acegi_save_account"]',u),m=$("a.login-btn",u),v=m.parents("form").find('input[name="username"]'),g=m.parents("form").find('input[name="password"]');g.val()&&g.next("label.empty-text").hide(),v.val()&&v.next("label.empty-text").hide(),$(".field",u).live({keydown:function(t){var e=t.keyCode;$(".invalid-text",u).hide(),13==e&&m.click()},focus:function(){var t=$(this).next("label.empty-text");t.addClass("emptytext-focus"),$(this).parents(".field-wrapper").removeClass("field-invalid"),$("#J_errerTip",u).hide()},blur:function(){var t=$(this).next("label.empty-text");t.removeClass("emptytext-focus")}}),c?(v.next("label.empty-text").hide(),v.val(c),f.attr("checked","checked"),n&&n.focusUsername!==!1&&g.focus()):n&&n.focusUsername!==!1&&v.focus(),m.isSubmiting=!1,m.bind("click",function(t){if(t.preventDefault(),v=$(this).parents("form").find('input[name="username"]'),g=$(this).parents("form").find('input[name="password"]'),!m.isSubmiting){var r=$.trim(v.val()),c=hex_md5(g.val()),u=$.trim(g.val());if(m.isSubmiting||""==r||""==c)e(1),w();else{m.isSubmiting=!0;var y=/^stk[\w\d]{3}\d{7,10}$/;if(1==y.test(r))$.ajax({url:"useCard.do?action=checkAuditionCardForBinding",data:{cardNo:r,cardPwd:u},dataType:"json",success:function(t){m.isSubmiting=!1,1==t.success?window.location.href="/useCardRedirect.do?action=toBindAuditionCard&cardNo="+r+"&cardPwd="+u:$(".frozentip").html(t.message).show()}});else{$("span",m).html("正在登录");var x=f[0].checked?"on":"off",k="",_="";"internal"==a&&(k=$("#companyName").val(),_=$("#adminUsername").val(),_.toLowerCase()==r.toLowerCase()?_="":r=r+"*"+_),l();var T=PASSPORT_SERVER+"login.do?ajax=true";"internal"==a&&(T+="&adminUsername="+_+"&companyName="+k),p&&(T+=n.param1+n.param2),"trial"===s&&(T+="&PSPT_trialPlay=true"),$.ajax({url:T,data:{isPopUp:!!h,j_username:r,j_password:c,_acegi_save_account:"on",_acegi_security_remember_me:x},type:"POST",dataType:"jsonp"}).done(function(t){d=t;var s=d.sS,a=d.alertMessage,r={isBinded:d.isBinded};if(n.successURL&&(d.successURL=n.successURL),0==s){if(!isAbleskyDomain)return i(r),void 0;o(r)}else e(s);a?b(a):w()})}}}});var b=function(t){t&&$(".frozentip").html(t).show()},w=function(){$(".frozentip").hide()};f.click(function(){l()}),setInterval(function(){$.each($("#J_loginMod .field"),function(){var t=this.value,e=$(this).next("label.empty-text");t?e.hide():e.show()})},50)};return{init:u}}),function(){var t=function(t){var e={type:"small",labelText:"您还可以使用其它帐号直接登录",labelIconSpacing:5,iconSpacing:5,betaTop:0};$(".third-party-login").each(function(){t&&(e=$.extend(e,t),e.labelColor="big"==e.type?"color:#FFF;":"");var i={};i.sina="https://api.weibo.com/oauth2/authorize?client_id=4117454953&redirect_uri="+HTTP_SERVER+"weibo.do&response_type=code",i.qq="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=100333946&redirect_uri="+HTTP_SERVER+"qq.do",i.taobao="https://oauth.taobao.com/authorize?response_type=code&client_id=21258762&redirect_uri="+HTTP_SERVER+"taobao.do&state=1212&scope=item&view=web",i.renren="https://graph.renren.com/oauth/authorize?client_id=c6d80d7dec3043ab8973f5185de776de&response_type=code&redirect_uri="+HTTP_SERVER+"renren.do",i.qweibo="https://open.t.qq.com/cgi-bin/oauth2/authorize?response_type=code&client_id=801273951&redirect_uri="+HTTP_SERVER+"qqweibo.do",i.weixin=HTTP_SERVER+"weixinLogin.do";var o=['<span class="beta_ico" style="top: '+e.betaTop+'px;"></span>','<span class="'+e.type+'-label-text" style="margin-right:'+e.labelIconSpacing+"px;"+e.labelColor+'" >',e.labelText,"</span>",'<a href="'+i.sina+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-sina" style="margin-right: '+e.iconSpacing+'px"></a>','<a href="'+i.qq+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-qq" style="margin-right: '+e.iconSpacing+'px"></a>','<a href="'+i.taobao+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-taobao" style="margin-right: '+e.iconSpacing+'px"></a>','<a href="'+i.renren+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-renren" style="margin-right: '+e.iconSpacing+'px"></a>','<a href="'+i.qweibo+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-qweibo" style="margin-right: '+e.iconSpacing+'px"></a>','<a href="'+i.weixin+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-weixin" ></a>'].join("");if(!isAbleskyDomain){var n=$(this),s="http://"+window.location.host+"/";$.ajax({url:s+"thirdparty/ids",dataType:"json",type:"post",success:function(t){if(t.success){var i={};i.sina="https://api.weibo.com/oauth2/authorize?client_id="+t.apps.weibo+"&redirect_uri="+s+"weibo.do&response_type=code",i.qq="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id="+t.apps.qq+"&redirect_uri="+s+"qq.do",i.tencentWeibo="https://open.t.qq.com/cgi-bin/oauth2/authorize?response_type=code&client_id="+t.apps.tencent_weibo+"&redirect_uri="+s+"qqweibo.do",i.weixin=s+"weixinLogin.do?appId="+t.apps.weixin;var o="",a="",r="",l="",c='<span class="'+e.type+'-label-text" style="margin-right:'+e.labelIconSpacing+"px;"+e.labelColor+'" >'+e.labelText+"</span>";t.apps.qq&&(o='<a href="'+i.qq+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-qq" style="margin-right: '+e.iconSpacing+'px"></a>'),t.apps.weibo&&(a='<a href="'+i.sina+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-sina" style="margin-right: '+e.iconSpacing+'px"></a>'),t.apps.tencent_weibo&&(r='<a href="'+i.tencentWeibo+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-qweibo" style="margin-right: '+e.iconSpacing+'px"></a>'),t.apps.weixin&&(l='<a href="'+i.weixin+'" class="sprite-'+e.type+"-icon sprite-"+e.type+'-icon-weixin" style="margin-right: '+e.iconSpacing+'px"></a>'),t.apps.qq||t.apps.weibo||t.apps.tencent_weibo||t.apps.weixin||(c="");var d=['<span class="beta_ico" style="top: '+e.betaTop+'px;"></span>',c,a,o,r,l].join("");n.html(d)}}})}isAbleskyDomain&&$(this).html(o);var a,r=window.location.href,l="";if((a=r.indexOf("ref=http://ad"))>-1)l=r.substring(a+"ref=".length);else if(r.indexOf("login.do")>-1){var c=r.indexOf("fromurl");l=c>-1?decodeURIComponent(r.substring(c+"fromurl=".length)):HTTP_SERVER}else l=r;AUI.cookie(!1,"oauth2_ref",l)})};"function"==typeof define&&define.amd&&define.amd.jQuery?define("account/widget-3partylogin",[],function(){return{init:t}}):(window.AUI=window.AUI||{},window.AUI.thirdPartyLogin={},window.AUI.thirdPartyLogin.init=t)}(),define("common/widget-poplogin",["module","jquery","common/global","lib/jquery/jquery.cookie","lib/jquery/jquery.dialog"],function(t,e){function i(t){e.extend(o,t);var i="",n=['<p class="loading" style="padding: 10px;">加载中 ...</p>'],r=a.replace("{content}",n.join("")).replace("{wrapId}",s);isAbleskyDomain?(require(["account/widget-3partylogin"],function(t){t.init({type:"small",labelText:"使用其它帐号登录",labelIconSpacing:"10",iconSpacing:"5"})}),i='<img src="'+IMG_PATH+'/market/login/pup-as-logo.png" style="width:98px;height:25px;vertical-align: middle;*+margin-top:3px;margin-left:10px;"/>'):i='<span style="margin-left:10px">用户登录</span>';var c=e.dialog({boxid:"index-pop",title:i,headStyle:{backgroundColor:"#09F"},bodyStyle:{backgroundColor:"#fff"},content:r,width:380,modal:o.modal,draggable:o.canDraggable,open:function(){l(s)}});c.setCenterPosition()}var o={modal:!0,draggable:!0},n=e.now(),s="J_popLogin"+n,a=['<div id="{wrapId}">','<table class="loginPopwin"><tbody>','<tr><td class="poplogin-content">{content}</td>',"</tbody></table></div>"].join(""),r="",l=function(t){var i=""==r?"":"&redirecturl="+encodeURIComponent(r),s="";isAbleskyDomain&&(s='<div style="padding-top: 12px; border-top: 1px solid #DDD;" class="third-party-login"></div>');var a=['<div style="padding: 0px 20px 3px 14px; position: relative; *zoom: 1;margin-left:25px">','<form  id="J_loginMod"><fieldset>','<label class="forusername" for="J_username'+n+'">邮箱/手机号/用户名:</label>','<div class="item clearfix">','<div class="l">&nbsp;</div>','<div class="c"><div class="field-wrapper">','<input type="text" name="username" id="J_username'+n+'" class="field" tabindex="1" autocomplete="on" />',"</div></div>",'<div class="r">&nbsp;</div>',"</div>",'<label class="forpwd" for="J_password'+n+'">密码:</label>','<div class="item clearfix">','<div class="l">&nbsp;</div>','<div class="c"><div class="field-wrapper">','<input type="password" name="password" id="J_password'+n+'" class="field" tabindex="1" autocomplete="on" />',"</div></div>",'<div class="r">&nbsp;</div>',"</div>",'<div class="clearfix">','<label class="remem" for="J_rememberMe'+n+'">'+'<input  id="J_rememberMe'+n+'" class="remem" name="_acegi_save_account"  type="checkbox"/>自动登录</label>','<a class="forget-pwd" href="accountRedirect.do?action=getPwdBack">忘记密码</a>',"</div>",'<div class="clearfix colorTipContainer" style="position: relative; padding-top: 5px; margin-bottom: 10px;">','<a class=" bluebtn30 login-btn" tabindex="1" href="javascript:;">','<span class=" bluebtn30_text text">立即登录</span>','<div id="J_errerTip" class="invalid-text" style="display: none;">','<p class="error" generated="true" for="J_verifycode">用户名或密码错误</p>','<s class="trigger">◆</s>',"</div>","</a>",'<a class="pup-register"  href="registerRedirect.do?action=toRegister&fromurl='+encodeURIComponent(window.location.href)+i+'">注册</a>','<em class="error-tip colorTip" style="display: none; position: absolute; left: -20px; top: -34px;">','<em class="right"><em class="left"><em class="center msg" style="padding:0 2px;">用户名或密码错误</em></em></em>','<em class="pointyTipShadow"></em>','<em class="pointyTip"></em>',"</em>","</div>",'<p class="frozentip"></p>',s,"</fieldset></form></div>"].join("");e(".poplogin-content",e("#"+t)).html(a),require(["common/module-login"],function(t){t.init({loginPanel:"form#J_loginMod",isPop:!0,successURL:o.successURL})})};return{init:i}}),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var i=t.scrollTo=function(e,i,o){t(window).scrollTo(e,i,o)};i.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,i=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return e;var o=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==o.compatMode?o.body:o.documentElement})},t.fn.scrollTo=function(o,n,s){return"object"==typeof n&&(s=n,n=0),"function"==typeof s&&(s={onAfter:s}),"max"==o&&(o=9e9),s=t.extend({},i.defaults,s),n=n||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(n/=2),s.offset=e(s.offset),s.over=e(s.over),this._scrollable().each(function(){function a(t){c.animate(u,n,s.easing,t&&function(){t.call(this,o,s)})}if(null!=o){var r,l=this,c=t(l),d=o,u={},h=c.is("html,body");switch(typeof d){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(d)){d=e(d);break}if(d=t(d,this),!d.length)return;case"object":(d.is||d.style)&&(r=(d=t(d)).offset())}t.each(s.axis.split(""),function(t,e){var o="x"==e?"Left":"Top",n=o.toLowerCase(),p="scroll"+o,f=l[p],m=i.max(l,e);if(r)u[p]=r[n]+(h?0:f-c.offset()[n]),s.margin&&(u[p]-=parseInt(d.css("margin"+o))||0,u[p]-=parseInt(d.css("border"+o+"Width"))||0),u[p]+=s.offset[n]||0,s.over[n]&&(u[p]+=d["x"==e?"width":"height"]()*s.over[n]);else{var v=d[n];u[p]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}s.limit&&/^\d+$/.test(u[p])&&(u[p]=u[p]<=0?0:Math.min(u[p],m)),!t&&s.queue&&(f!=u[p]&&a(s.onAfterFirst),delete u[p])}),a(s.onAfter)}}).end()},i.max=function(e,i){var o="x"==i?"Width":"Height",n="scroll"+o;if(!t(e).is("html,body"))return e[n]-t(e)[o.toLowerCase()]();var s="client"+o,a=e.ownerDocument.documentElement,r=e.ownerDocument.body;return Math.max(a[n],r[n])-Math.min(a[s],r[s])}}(jQuery),define("lib/jquery/jquery.scrollto",function(){}),function(){function t(t){var i=t&&t.config(),o=i&&i.hasOwnProperty&&i.hasOwnProperty("hideThisModule")&&1==i.hideThisModule,n=window.jq||window.jQuery||window.$;return n(function(){function t(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1}function e(e,i){var o=t(e,i);o>-1&&e.splice(o,1)}function i(t){e(Ie,t),n(ve).each(function(){this.id==t&&(this.newNum=0)})}function s(e,i){t(e,i)<0&&e.push(i)}function a(t,e){if(fe!=e.id){for(var i=0;i<t.length;i++)if(t[i].id==e.id)return;t.push(e)}}function r(t,e){var i=t;return n(e).each(function(){l(i,this)}),i}function l(t,e){for(var i=0;i<t.length;i++)if(t[i].packetId==e.packetId)return;t.push(e)}function c(t){t.sort(function(t,e){var i=t.sendTime-e.sendTime;return i})}function d(t){return t.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1" title="$1" target="_blank" class="url2link">$1</a>')}function u(t,e){t=String(t);var i=Array.prototype.slice.call(arguments,1),o=Object.prototype.toString;return i.length?(i=1==i.length?null!==e&&/\[object Array\]|\[object Object\]/.test(o.call(e))?e:i:i,t.replace(/#\{(.+?)\}/g,function(t,e){var n=i[e];return"[object Function]"==o.call(n)&&(n=n(e)),"undefined"==typeof n?"":n})):t}function h(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function p(t){var e=new Date;t&&e.setTime(t);var i=e.getHours(),o=e.getMinutes(),n=e.getSeconds();return i=i>9?i:"0"+i,o=o>9?o:"0"+o,n=n>9?n:"0"+n,i+":"+o+":"+n}function f(t){for(var e=0,i=t.length,o=-1,n=0;i>n;n++)o=t.charCodeAt(n),e+=o>=0&&128>=o?1:2;return e/=2,Math.ceil(e)}function m(t){var e,i,o,s,a=Array.prototype.slice.call(arguments,1),r=a.slice(1);if(!(ve.length<1||a.length<1))return 1==a.length?n.isFunction(a[0])?(n(ve).each(function(){this.id==t&&a[0].apply(this)}),void 0):(i=String(a[0]),n(ve).each(function(){this.id==t&&(e=this[i])}),"undefined"==typeof e?"":e):n.isFunction(a[0])?(n(ve).each(function(){this.id==t&&a[0].apply(this,r)}),void 0):(o=String(a[0]),s=a[1],n(ve).each(function(){this.id==t&&(this[o]=s)}),void 0)}function v(t){var e=m(t,"iconUrl");return e.length>0?e:m(t,"iconUrltag")?me:(w(t),me)}function g(t){var e=m(t,"iconUrl");return e.length>0?!0:!1}function b(t,e){var i;if(t&&e)for(var o=0;o<t.length;o++)i=n('img.imPhoto[userid="'+t[o]+'"]',ze),i.attr("src",e[o]);else n(ve).each(function(){i=n('img.imPhoto[userid="'+this.id+'"]',ze),this.iconUrl&&this.iconUrl.length>0&&i.attr("src",this.iconUrl)})}function w(t){var e,i=Object.prototype.toString,o=/\[object Array\]/.test(i.call(t)),s=[];o?n(t).each(function(){var t=this.id||this.username.toLowerCase();!g(t)&&s.push(t)}):s=g(t)?s:[t],e=s.join(","),s.length<1||n(s).each(function(){m(this,"iconUrltag",!0)})}function y(t){var e=encodeURI(HTTP_SERVER+t);return e}function x(t,e){var t=arguments[0],e=arguments[1];if(!this.messages&&(this.messages=[]),this.len1=this.messages.length,this.messages=r(this.messages,t.newList),this.len2=this.messages.length,c(this.messages),this.len1!=this.len2&&(1!=je&&(this.offline=0),e==ke&&(A(),"max"==Ce&&P())),t.newNum>0&&(e!=ke||"max"!=Ce)){if(e!=ke&&"max"!=Ce){ke=e;var i=e+","+m(e,"name");D("add",i)}"close"==Ce&&(Ce="mini")&&D("l","mini"),s(Ie,e),!this.newNum&&(this.newNum=0),this.newNum+=t.newNum}}function k(t){var e=Te.length;if(null!=t&&t.list.length>0)Te=[],n(t.list).each(function(){var t=this.caller.toLowerCase(),e=this.callerScreenName,i=this,o={id:t,name:e};if(a(ve,o),s(Te,t),i.newNum=0,i.newList=[],n(this.messages.list).each(function(){var t=this.messageBody,e=this.postTime,o=p(this.postTime),s=this.packetId,a=this.messageFrom.toLowerCase(),r=a==fe?1:0;t=n.trim(t),t=h(t),t=d(t);var l={isMe:r,message:t,time:o,source:"web",sendTime:e,packetId:s};i.newList.push(l),"new"==this.type&&a!=fe&&i.newNum++}),m(t,x,i,t),this.messages.list.length<1){var r=n.now()-Fe.nowtime;return r>Pe&&(Oe=$e),void 0}Fe.nowtime=n.now(),Oe=qe});else{var i=n.now()-Fe.nowtime;i>Pe&&(Oe=$e)}e!=Te.length&&j()}function _(t){if(null!=t){var e=t.current_username;if(Se=null==t.r_state?Se:t.r_state,Ce=null==t.l_state?Ce:t.l_state,null!=e&&e!=ke){var e=e.toLowerCase(),i={id:e,name:t.current_screenname};a(ve,i),ke=e,Q(ke,"other")}}}function T(t){var i=_e.length;null==t||t.list.length<1||n(t.list).each(function(){var t=this.from.toLowerCase(),o="unavailable"==this.status?1:0,n={id:t,name:this.fromScreenName};this.from!=fe&&(a(ve,n),m(t,"offline",o),o?e(_e,t):s(_e,t),i!=_e.length&&(R(),S()))})}function I(t,e){var t=t||{};if(list=t.result.list||[],list.length<1)F();else{var i=h(e),o="您的好友中没有找到“"+i+"”<br/>学习者中有"+list.length+"位相关用户：",s=u(he,{val:o});n(".fd-list li",ze).hide(),Ke.empty().append(n(s)).show(),ti.empty(),n(list).each(function(){var t=this.username.toLowerCase(),e={id:t,name:this.screenName,messages:[]};a(ve,e)}),w(list),n(list).each(function(){var t=this.username.toLowerCase(),e=u(ue,{id:t,name:this.screenName,backUrl:v(t),spaceUrl:y(t),TplclassName:"seachAbleSky"});ti.append(n(e)).show()})}ee.updateData().totop()}function C(){var e=m(ke,"name"),o=e&&4==e.length?"clip":"ellipsis";n(".chat-nav .fd-foot-name",ze).css("text-overflow",o),n(".fd-name-on",ze).text(e),"close"==Ce?(n(".overline",ze).hide(),ci.removeClass("nav2"),di.hide(),li.empty(),n(Te).each(function(){i(this)}),Te=[],ni.hide(),si.hide()):"mini"==Ce?(n(".overline",ze).hide(),1==Te.length&&ci.removeClass("nav2")&&di.hide(),ni.hide(),si.show()):"max"==Ce&&(t(Ie,ke)>=0&&i(ke),j(),si.hide(),ni.show()),U()}function S(){Fe.onNum=_e.length,Ve.text("("+Fe.onNum+")"),"mini"==Se?(Xe.show(),Ge.hide(),Qe.css("z-index","1")):"max"==Se&&(Qe.css("z-index","3"),Xe.hide(),Ge.show(),E()),U()}function E(){var t=Fe.nn||0;if(Fe.nn=t+1,Ve.text("("+_e.length+")"),!Ue){ti.hide(),Ze.empty(),Ke.hide();var e=u(he,{val:"当前没有好友在线 "});_e.length>0?n(_e).each(function(){var t=u(ue,{id:this,name:m(this,"name"),backUrl:v(this),spaceUrl:y(this),TplclassName:"friend-li"});n(t).appendTo(Ze)}):Ke.empty().append(n(e)).show(),ee.updateData(),ti.empty().hide(),U()}}function j(){var t=Te.length;if(li.empty(),t>1?fi.show():fi.hide(),t>0){var e=t>=99?99:t;mi.text(e),n(Te).each(function(){var t=m(this,"name");""!=t&&n('<li userid="'+this+'"><span class="fd-name">'+t+'</span><span class="li-close"></span></li>').appendTo(li)})}var i=n('.chat-list-main li[userid="'+ke+'"]',ze),o=i.prev()||!1;n(".chat-list-main li",ze).removeClass("onfocus").removeClass("perFocus").removeClass("focusFont"),o&&o.addClass("perFocus"),i.addClass("onfocus").addClass("focusFont"),Te.length>1?(ci.addClass("nav2"),di.show()):(Te.length<1||Ae)&&(Ae=!1,ci.removeClass("nav2"),di.hide()),R()}function A(){var t=ke,e=m(t,"messages");ai.empty(),!e&&(e=[]),e.length<=0||(n(e).each(function(){var e=this.isMe?pe:m(t,"name"),i=this.isMe?fe:t,o=u(de,{spaceUrl:y(i),iconurl:v(i),name:e,message:this.message,time:this.time,id:i});Fe.stop?Fe.stop=!1:n(o).appendTo(ai)}),ie.updateData().tobottom())}function U(){var e=Ie.length;n("li",ze).removeClass("new-tip"),e>0?(Fe.newNum=0,n(Ie).each(function(){Fe.newNum+=m(this,"newNum")}),Ee!=Fe.newNum&&(Ee=Fe.newNum,setTimeout(function(){document.title="【"+Ee+"条新消息】"},0)),ei.addClass("new-tip"),si.find(".inner").addClass("new-tip"),n("li",ze).each(function(){var e=n(this).attr("userid");t(Ie,e)>=0&&n(this).addClass("new-tip")})):(setTimeout(function(){document.title=De},0),Ee=0,ei.removeClass("new-tip"),si.find(".inner").removeClass("new-tip"))}function R(){pi.hide(),n(ve).each(function(){n(".offline-home",ze)[0].href=y(ke);var t=n('.chat-list-main li[userid="'+this.id+'"]',ze);1==this.offline?t.addClass("offlineFont"):t.removeClass("offlineFont"),ke==this.id&&Re&&(1==this.offline?pi.show():pi.hide())})}function q(t,e){var i=e||1e3,o=t||"";window.Ext?(n(".abPopWin button").live("click",function(){setTimeout(function(){window.location.reload()},i)}),Msg.showInfo(o)):n.dialog({title:"提示",content:o,width:400,modal:!0,draggable:!1,buttons:[{text:"确定",css:{backgroundColor:"#09F"}}],close:function(){window.location.reload()}})}function O(t){var e={isCommonNotice:!0,noticeText:t};AUI.showFootTip(e)}function $(){var t=Le||0;je++,n.ajax({url:PASSPORT_SERVER+"check.do?action=checkIfOut",data:{lastReceiveTime:t,username:ke,organizationId:AUI.curUserInfo.organizationId},dataType:"jsonp",cache:!1,success:function(t){if(!t.isOut)return Fe.chatpoll=setTimeout(function(){$()},Oe),void 0;if(t.isOut)return q("请注意! 您的帐号已退出或已在其它地点登录！",1e3),AUI._runAuiEvent("loginOut"),void 0;t.popGM===!0&&O(t.groupmessage);try{Le=t.lastReceiveTime,_(t.result.chatBoxState),k(t.result.chaters),C(),S(),T(t.result.recordList),Fe.chatpoll=setTimeout(function(){$()},Oe)}catch(e){}1==je&&(w(ve),A(),E(),j(),R(),U(),b(),ri.val(""),z(),ri.hide().show(),Qe.show(),ee.updateData().totop(),ie.updateData().tobottom())}})}function P(t){var e=t||ke;n.ajax({url:IM_SERVER+"chat.do?action=updateChatHistoryRecord&_="+n.now(),data:{username:e,time:Le},dataType:"jsonp"})}function N(){Te.join(","),n.ajax({url:IM_SERVER+"chat.do?action=batchUdateChatHistoryRecord",data:{time:Le},cache:!1,dataType:"jsonp"})}function D(t,e){n.ajax({url:IM_SERVER+"chat.do?action=processCommand",data:{target:t,state:e},cache:!1,dataType:"jsonp"})}function M(t,e,i){return"l"==t?Ce=e:"r"==t&&(Se=e),D(t,e),ri.focus(),i&&i.call(this),!1}function H(){var t=ii.val(),e=0;return ti.empty().hide(),n(".fd-list li",ze).hide(),Ke.hide().empty(),0==t.length?(Ue=!1,E(),void 0):(Ue=!0,n(".fd-list .fd-name",ze).each(function(){n(this).text().indexOf(t)>=0&&(n(this).parent().show(),e++)}),0==e&&L(),ee.updateData().totop(),void 0)}function L(){var t=ii.val();n.ajax({url:SEARCH_SERVER+"su.do?key="+t,dataType:"jsonp",success:function(e){I(e,t)},error:function(){F()}})}function F(){var t=h(ii.val()),e="没有找到“"+t+"”"+Me,i=u(he,{val:e,inviteUrl:we,TplclassName:He});ti.empty().hide(),Ke.hide().html(n(i)).show()}function z(){var t=ri.val(),t=n.trim(t),e=f(t),i=n(".textarea-tip");Fe.num2=200-e,Fe.num2=Fe.num2<-99?-99:Fe.num2;var o=Fe.num2>=0?"#999999":"red";i.css("color",o),i.text(Fe.num2),Fe.num2<0?(ri.parent().addClass("warn"),n(".overline",ze).show(),n(".chat-box .fd-foot",ze).css("border-top-color","#ff9999")):(ri.parent().removeClass("warn"),n(".overline",ze).hide(),n(".chat-box .fd-foot",ze).css("border-top-color","#cccccc"),ae.hide())}function J(){var t=ri.val(),e=(new Date).getTime(),i=ae;if(t=n.trim(t),t=h(t),t=d(t),!(t.length<=0)){var o=p(),a=u(de,{spaceUrl:ge,iconurl:v(fe),name:pe,message:t,time:o,id:fe});if(Fe.num2<0)return i.css("opacity","1").show(),setTimeout(function(){Ne?i.hide():i.fadeOut(1e3)},1e3),void 0;n.ajax({url:IM_SERVER+"chat.do?action=sendChatMessage&_="+e,data:{callee:ke,chatMessage:ri.val()},dataType:"jsonp",success:function(i){i.success?n(ve).each(function(){!this.messages&&(this.messages=[]);var n={isMe:1,message:t,time:o,source:"local",sendTime:e,packetId:i.id};this.id==ke&&s(this.messages,n),c(this.messages)}):r.show()},error:function(){r.show()}}),n(a).appendTo(ai);var r=n(".failsend:last",ze);ie.updateData().tobottom(),Fe.nowtime=n.now(),Oe=qe,ri.val("").focus(),ri.focus()}}function W(t){var e=30*Te.length,i=li.css("top"),o=parseFloat(i,10),n=e+o;"down"==t&&n>300?li.animate({top:"-=30px"},100):"up"==t&&-29>o&&li.animate({top:"+=30px"},100),"upover"==t&&-29>o?ui.addClass("bgc").find(".inner").addClass("innerhover"):"downover"==t&&n>300&&hi.addClass("bgc").find(".inner").addClass("innerhover"),B()}function B(){var t=30*Te.length,e=li.css("top"),i=parseFloat(e,10),o=t+i;i>0||300>t?li.css("top",0):301>o&&li.css("top",300-t)}function Q(t,e){var e=e||"self",i=t+","+m(t,"name");t!=fe&&(Re=!0,ke=t,("self"==e||"max"==e)&&(D("add",i),"max"!=Ce&&D("l","max"),Ce="max",P()),"max"!=e&&ri.val(""),s(Te,t),C(),U(),A(),R(),ri.focus(),z(),Fe.nowtime=n.now())}function V(t){var t=t||window.event,e=n(t.target).closest(ze).length;e>0||("max"==Se&&(Se="mini",D("r","mini"),S()),"max"==Ce&&(Ce="mini",D("l","mini"),C()))}function Y(t,e){var i,o=e||m(t,"name"),t=t.toLowerCase();if(i={id:t,name:o},ye){if(t==fe||t==ke&&"max"==Ce)return;a(ve,i),n(ve).each(function(){return t==this.id?(this.name=o,void 0):void 0}),n(document).unbind("click",V),Q(t),setTimeout(function(){n(document).bind("click",V)},0)}else window.Ext?popUpSignInWin():require(["common/widget-poplogin"],function(t){t.init()})}function X(){}function G(t){this.fo=t.fo[0]||t.fo||document.body,this.bottom=t.bottom||!1,this.right=t.right||!1,this.left=t.left||0,this.top=t.top||0,this.tipClassName=t.className||"myTip",this.text=t.text,this.tipwidth=t.tipwidth||"70px",this.ns6="Netscape"==navigator.appName?!0:!1,this.isIE=n.browser.msie||!1,this.tipDiv="<div class="+this.tipClassName+" >"+this.text+"</div>",n(this.tipDiv).appendTo(n(this.fo)),this.tip=n("."+this.tipClassName),this.tip.addClass("mytip"),this.upDataStyle()}function Z(t){this.dh=t.dh,this.obj=t.obj,this.topH=t.topH||340,this.eventName=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",this.ns6="Netscape"==navigator.appName?!0:!1,this.tag=!0}function K(){this.rocketdiv=n('<div class="rocketout"><a class="right-icon-btn"><div class="rocket hd b1"></div><div class="bd"><span>返回<br>顶部</span></div></a></div>'),this.bW=n("body").width()}AUI.checkIfLogin();var te=n('<div id="J_fixedTools" class="fiexed-tools right-icon-wrap"></div>').appendTo(n("body"));n('<div id="J_webim"></div>').appendTo(te);var ee,ie,oe,ne,se,ae,re=/\/(login|bindOrgUserToAsAccount)\.do/g,le=re.test(window.location.href),ce=['<div class="chat">','<div class="live-nav" style="display:none;"><div class="live-nav-inner"><span class="nav-text nav-text1"><span class="AbleLiveSpan">好友在线<span class="num-live"></span></span></span></div></div>','<div class="live-face">','<div class="face-nav right-mini"><span class="nav-text"><span class="AbleLiveSpan">好友在线<span class="num-live"></span></span></span></div>','<div class="searchOut"><input type="text" name="keySearch" class="keySearch" value="查找好友" /><div class=searchbar></div></div>','<div class="fd-user"><div class="scroll-w"><div class="findbox"></div><ul class="fd-list"></ul><ul class="fd-list ableskyfd"></ul></div><div class="scroll-y"><div class="scroll"></div></div></div>','<div class="fd-foot live-face-foot right-mini"><div class="img-foot"></div></div>',"</div>",'<div  class="chat-box">','<div class="face-nav left-mini"><div class="inner"><span class="fd-name-on"></span><div class="close1" ></div><div class="mini"></div></div></div>','<div class="chat-inner"><div class="offline">好友已离线，您可以进入<a class="offline-home" target="_blank">好友空间</a>给他(她)留言<span class="offline-close"></span></div>','<div class="chatwindow"><div class="scroll-w"><div class="chat-box-main"></div></div><div class="scroll-y"><div class="scroll"></div></div></div>','<div class="tout"><textarea class="chat-box-textarea" rows=""cols=""></textarea></div><div class="fd-foot"><span class="textarea-tip">200</span><div class="send">发&nbsp;&nbsp;送</div></div></div>','<div class="chat-list"><div class="list-up"><div class="inner"></div></div><div class="chat-list-center"><ul class="chat-list-main"></ul></div><div class="list-down"><div class="inner"></div></div></div>',"</div>",'<div class="chat-nav left-max"><div class="inner"><span class="fd-foot-name fd-name-on"></span><div class="onChatfd">等<span class="onChatNum">1</span>个会话</div><div class="close2"></div><div class="max"></div><div style="height:0;clear: both;"></div></div></div>','<div class="overline"></div></div>'].join(""),de='<div class="talk"><a href="#{spaceUrl}" target="_blank"><div class="icon" style="float:left;width: 27px;height: 27px"><img class="imPhoto" userid="#{id}" src="#{iconurl}"/></div></a><div class="message"><a href="#{spaceUrl}" target="_blank"><strong  class="user-self talk-name">#{name}:&nbsp;&nbsp;</strong></a>#{message}<span class="time">&nbsp;&nbsp;-[#{time}]</span><span class="failsend">发送失败</span></div></div>',ue='<li userid="#{id}" class=#{TplclassName}><div class="icon" style="float:left;width: 27px;height: 27px;margin-left:9px;_margin-left:5px;margin-top:1px;"><img class="imPhoto" userid="#{id}" src="#{backUrl}"  style="width: 27px;height: 27px;"/></div><span class="fd-name">#{name}</span><a class="home" href="#{spaceUrl}" target="_blank"><div class="home1"></div><div class="home-tip"></div></a></li>',he='<div class="findnone">#{val}<br/><a href="#{inviteUrl}" target="_blank" class="#{TplclassName}">邀&nbsp;&nbsp;请</a></div>',pe=(AUI.curUserInfo.isClientOnline,AUI.curUserInfo.screenName),fe=AUI.curUserInfo.username.toLowerCase(),me=IMG_PATH+"/market/user-default.png",ve=[{id:fe,name:pe}],ge=(v(fe),y(fe)),be=isAbleskyDomain?HTTP_SERVER:"",we=encodeURI(be+"newAccountRedirect.do?action=invite&username="+fe),ye=AUI.checkIfLogin(),xe=AUI.curUserInfo.isDescendantUserWithAuth||AUI.curUserInfo.isSuperOrganizationManager,ke="",_e=[],Te=[],Ie=[],Ce="close",Se="mini",Ee=(n.now(),0),je=0,Ae=!0,Ue=!1,Re=!0,qe=5e3,Oe=15e3,$e=Oe,Pe=3e4,Ne=n.browser.msie||!1,De=document.title,Me=xe?"":"<br/>立即邀请同学一起来学习、讨论",He=xe?"hidden":"invitefd",Le=0,Fe={};
n(ce).appendTo(n("#J_webim"));var ze=n("#J_webim"),Je=n(".right-mini",ze),We=n(".left-mini, .mini",ze),Be=n(".left-max, .max",ze),Qe=n(".chat",ze),Ve=n(".num-live",ze),Ye=n(".nav-text1",ze),Xe=n(".live-nav",ze),Ge=n(".live-face",ze),Ze=n(".fd-list",ze),Ke=n(".findbox",ze),ti=n(".ableskyfd",ze);n(".live-face-foot",ze);var ei=n(".live-nav-inner",ze),ii=n(".keySearch",ze),oi=ii.val(),ni=n(".chat-box",ze),si=n(".chat-nav",ze),ai=n(".chat-box-main",ze),ri=n(".chat-box-textarea",ze),li=n(".chat-list-main",ze),ci=n(".face-nav",ze),di=n(".chat-list",ze),ui=n(".list-up",ze),hi=n(".list-down",ze);n(".off-tip",ze);var pi=n(".offline",ze),fi=n(".onChatfd",ze),mi=n(".onChatNum",ze);Qe.hide(),Ne&&(n(".face-nav",ze).append(n('<div class="tl"></div><div class="tr"></div>')),n(".live-nav, .chat-nav",ze).append(n('<div class="tl1"></div><div class="tr1"></div>'))),o&&ze.hide(),X.prototype={init:function(){return Fe=this,le?(Qe.hide(),void 0):(ye?Fe.logInInit():Fe.logOutInit(),void 0)},logInInit:function(){Fe.bindEvent(),$()},logOutInit:function(){Ye.css("background-position","0 -339px"),n(".live-nav",ze).bind({mouseenter:function(){n(this).addClass("bgc"),Ye.css("background-position","0 -372px")},mouseleave:function(){n(this).removeClass("bgc"),Ye.css("background-position","0 -339px")},click:function(){window.Ext?popUpSignInWin():require(["common/widget-poplogin"],function(t){t.init()})}}),Qe.show()},bindEvent:function(){var i=ii;n(document).bind("click",V),Xe.live("click",function(){ee.updateData().totop(),M("r","max",S)}),Je.live("click",function(){M("r","mini",S)}),n(".chat-box .close1, .close2",ze).click(function(){return M("l","close",function(){Ae=!0,N(),C()}),!1}),We.click(function(){return M("l","mini",C),!1}),Be.click(function(){return Q(ke,"max"),ri.focus(),!1}),n(".fd-list li",ze).live({mouseenter:function(e){var i=this.attributes.userid.nodeValue,e=e||window.event;return e.target,n(this).addClass("bg"),Fe.a=n(this).find("a"),t(Ie,i)>=0?!1:(oe.upData(this),Fe.a.show(),void 0)},mouseleave:function(){n(".fd-list li",ze).removeClass("bg"),n(".fd-list li",ze).find("a").hide()},click:function(t){var e=this.attributes.userid.nodeValue;("max"!=Ce||e!=ke)&&Q(e),ri.focus(),t.stopPropagation()}}),n(".fd-list .home",ze).live({mouseenter:function(){se.show()},mouseleave:function(){Fe.gt=setTimeout(function(){se.hide()},100)},click:function(t){t.stopPropagation()}}),n(".homeTip",ze).live({mouseenter:function(){clearTimeout(Fe.gt),Fe.a.show()},mouseleave:function(){Fe.a.hide(),se.hide()}}),i.live({focus:function(){i.addClass("focus"),n(".searchbar",ze).addClass("searchbarfocus"),Ue=!0,i.val()==oi&&i.val("")},blur:function(){i.removeClass("focus"),n(".searchbar",ze).removeClass("searchbarfocus"),""==i.val()&&i.val(oi)&&(Ue=!1)},keyup:function(){H()}}),n(".chat-list-main li",ze).live({mouseenter:function(){var e=this.attributes.userid.nodeValue;e!=ke&&n(this).css("background-color","#EEEEEE"),t(Ie,e)>=0||(Te.length<2?n(this).find(".li-close").hide():n(this).find(".li-close").show())},mouseleave:function(){var t=this.attributes.userid.nodeValue;t!=ke&&n(this).css("background-color","#F7F7F7"),n(this).find(".li-close").hide()},click:function(){var t=this.attributes.userid.nodeValue;return ri.focus(),t!=ke&&Q(t),!1}}),n(".chat-list-main .li-close",ze).live({mouseenter:function(){n(this).addClass("li-closehover")},mouseleave:function(){n(this).removeClass("li-closehover")},click:function(){if(!(Te.length<2)){var t=n(this).parent(),i=t.attr("userid"),o=n('.chat-list-main li[userid="'+ke+'"]',ze),s=o.next().attr("userid")||o.prev().attr("userid"),a=i+","+m(i,"name");return ke=i==ke?s:ke,Te.length>0&&(Ae=!1),e(Te,i),D("del",a),Q(ke),s==ke&&ri.val("").focus(),B(),!1}}}),ui.click(function(){W("up")}).hover(function(){W("upover")},function(){ui.addClass("bgc").find(".inner").removeClass("innerhover")}),hi.click(function(){W("down")}).hover(function(){W("downover")},function(){hi.addClass("bgc").find(".inner").removeClass("innerhover")}),n(".offline-close",ze).click(function(){return pi.hide(),Re=!1,!1}),ri.live({keydown:function(t){var e=t||window.event,i=e.charCode||e.keyCode,o=n(this).val().replace("\n","").replace(/^\s+$/,"");return z(),13==i?(n(this).val(o),J(),z(),!1):void 0},keyup:function(){z()},change:function(){z()}}),n(".send",ze).live("click",function(){J(),ri.focus(),z()}),n(".send, .mini, .close1, .close2, .max",ze).each(function(){var t=this.className+"hover";n(this).attr("hoverclass",t)}).live({mouseenter:function(){n(this).addClass(n(this).attr("hoverclass"))},mouseleave:function(){n(this).removeClass(n(this).attr("hoverclass"))}}),n(".live-nav, .live-face-foot, .chat-nav",ze).hover(function(){n(this).addClass("bgc")},function(){n(this).removeClass("bgc")})}},G.prototype={upDataStyle:function(){this.tip&&(this.isIE&&this.left&&(this.left=parseFloat(this.left)-1+"px"),this.bottom?this.tip.css("bottom",this.bottom):this.tip.css("top",this.top),this.right?this.tip.css("right",this.right):this.tip.css("left",this.left))},upData:function(t,e,i){for(var o,n,s=0,a=0,r=t,l=e||this.left,c=i||this.top;null!=r&&r!=this.fo;)s+=r.offsetLeft,a+=r.offsetTop,this.ns6||(r.currentStyle.borderLeftWidth>0?s+=r.currentStyle.borderLeftWidth:"",r.currentStyle.borderTopWidth>0?a+=r.currentStyle.borderTopWidth:""),r=r.offsetParent;o=parseFloat(l)+parseFloat(s),n=parseFloat(c)+parseFloat(a),this.tip.css({left:o,top:n})},getTip:function(){return this.tip}},Z.prototype={init:function(){this.wh=this.obj.find(".scroll-w").height();var t,e=this.dh,i=this.wh,o=this.obj;return this.hh=e*e/i,this.rate=e/this.hh,t=this.hh,this.strip=o.find(".scroll"),this.block=o.find(".scroll-w"),this.scY=o.find(".scroll-y"),e>i?(o.find(".scroll-y").hide(),o.find(".scroll-w").css("top","-1px")):o.find(".scroll-y").show(),o.find(".scroll-y").height(e),this.strip.height(t),this.strip.css("top",0),this.block.css("top",0),this.strip.append(n('<div class="sct"></div><div class="scc"></div><div class="scb"></div>')),this.bindEvent(),this.t1=0,this.t2=0,this.isWheel=1,this},bindEvent:function(){function t(){!u||u>f||(u++,e=h.getHeight()-s,d-=20,d=21>d?20:d,a=h.topH-parseInt(h.strip.css("top")),oh=parseInt(h.strip.height()),r=a-oh,l=e-a,c=r-e,l=100>l?l:l/f,c=100>c?c:c/f,i=e>=a?-l:c,i=r>=e?c:-l,h.t1=h.t1+i,h.t2=h.t2-i*h.rate,h.scrollTop(),e>=r-1&&a+1>=e||(o=setTimeout(function(){t()},d)))}var e,i,o,s,a,r,l,c,d,u,h=this,p=0,f=3;h.addEvent(h.obj[0],h.eventName,function(t){var e=t||window.event,i=0;0!=h.isWheel&&(h.stopPropagation(e),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),h.t1=h.t1-5*i,h.t2=h.t2+5*i*h.rate,h.scrollTop(),h.preventDefault(e))}),h.obj.live({mouseenter:function(){h.tag=!1},mouseleave:function(){h.tag=!0}}),h.scY.live({mousedown:function(e){var e=e||window.event;return s=e.clientY,d=160,u=1,t(),!1},mouseup:function(){return p=0,u=0,clearTimeout(o),!1}}),h.strip.live({mousedown:function(t){return t=t||window.event,e=t.clientY,p=1,n(document).mousemove(function(t){return p&&(t=t||window.event,i=t.clientY-e,e=t.clientY,h.t1=h.t1+i,h.t2=h.t2-i*h.rate,h.scrollTop()),!1}).mouseup(function(){return p=0,!1}),!1},mouseenter:function(){this.style.backgroundColor="#DDDDDD",n(this).addClass("schover")},mouseleave:function(){n(this).removeClass("schover"),this.style.backgroundColor="#E7E7E7"}})},scrollTop:function(){var t=this.t1,e=this.t2,i=this.dh,o=this.hh,n=this.wh;return t=t>i-o?i-o:t,t=0>=t?0:t,e=e>=0?0:e,e=i-n>e?i-n:e,this.t1=t,this.t2=e,this.strip.css("top",t+"px"),this.block.css("top",e+"px"),this},updateData:function(){this.wh=this.obj.find(".scroll-w").height();var t=this.dh,e=this.wh,i=this.obj;return this.hh=t*t/e,this.rate=t/this.hh,t>e?(i.find(".scroll-y").hide(),i.find(".scroll-w").css("top","-1px"),this.isWheel=0):(i.find(".scroll-y").show(),this.isWheel=1),this.hh=this.hh<30?30:this.hh,this.strip.height(this.hh),this},tobottom:function(){var t=this.dh,e=this.wh,i=this.hh;return e>t&&this.tag&&(this.strip.css("top",t-i),this.block.css("top",t-e)),this},totop:function(){return this.strip.css("top",0),this.block.css("top",0),this},getHeight:function(){var t;return t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},addEvent:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,function(){i.call(t,window.event)}):t["on"+e]=i},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},K.prototype={init:function(t){var e=this;this.option=t||{},e.rocketdiv.appendTo(ze),e.rocket=n(".rocketout",ze),e.rocketTip=new G({fo:e.rocket,className:"myrocketTip",left:"-8px",top:"-34px",text:"回到顶端"}),e.tip=e.rocketTip.getTip(),e.tip.hide(),e.rocket.addClass("overHidden"),e.rocket.hide(),e.hasScroll=e.isScroll(),e.upData(),window.onresize=function(){e.hasScroll=e.isScroll(),e.upData()},window.onscroll=function(){e.upData()},n(window).bind("resize",function(){e.upData()}).bind("scroll",function(){e.upData()});var i=function(){e.rocket.live({click:function(){n.scrollTo(0,{duration:200,onAfter:function(){e.rocket.removeClass("rockethover").addClass("overHidden")}})},mouseenter:function(){n(this).addClass("rockethover").removeClass("overHidden"),e.tip.show()},mouseleave:function(){n(this).removeClass("rockethover").addClass("overHidden"),e.tip.hide()}})};window.Ext?i():require(["lib/jquery/jquery.scrollto"],function(){i()})},upData:function(){0==n(document).scrollTop()?this.rocket.hide():this.hasScroll.scrollX?this.rocket.hide():this.rocket.show()},isScroll:function(t){for(var e=t?[t]:[document.documentElement,document.body],i=!1,o=0;o<e.length;o++){var n=e[o],s=n.scrollLeft;n.scrollLeft+=s>0?-1:1,n.scrollLeft!=s&&(i=!0),n.scrollLeft=s}return{scrollX:i}}},ee=new Z({obj:n(".fd-user"),dh:280,topH:310}),ie=new Z({obj:n(".chatwindow"),dh:250,topH:340}),ee.init().updateData().totop(),ie.init().updateData().tobottom(),oe=new G({fo:ze,className:"homeTip",left:"147",top:"-25",text:"去往空间"}),se=oe.getTip(),se.hide(),ne=new G({fo:ze,className:"myoverTip",bottom:"26px",right:"232px",text:"字太多啦"}),ae=ne.getTip(),ae.hide();var vi=new K,gi=window.screen.width;window.screen.height,gi>1024&&vi.init();var bi=new X;bi.init(),AUI.webim=AUI.webim||{},AUI.webim.init=function(t){bi.init(t)},AUI.webim.chatWithMe=function(t,e){Y(t,e)}}),e?{}:void 0}var e="function"==typeof define&&define.amd&&define.amd.jQuery;e&&!window.Ext?define("accessory/webim",["module","jquery","common/global"],t):t()}(window.jQuery),function(t){function e(e){function i(e){var i="b4",o="APP<br>下载",n=isAbleskyDomain?IMG_PATH+"/icon_v6/productPage/main/app_2code.png":IMG_PATH+"/icon_v5/mobileClient/code.png";"true"==l&&(n=HTTP_SERVER+"eventsRedirect.do?action=getQRCode&qrcode="+BASE_PATH+"app/download/ableCourseOne?appType=netSchool&size=75");var s='<div class="qrCode-warp"><img src="'+n+'" width="126" height="126"><span>扫码下载</span></div>';if("wx"==e){i="b5",o="进入<br>网校";var a=encodeURIComponent(MOBILE_SERVER+"orgWebSchool.do?action=getOrganizationByTwodimensional&organizationId="+r);s='<div class="qrCode-warp"><img src="'+HTTP_SERVER+"eventsRedirect.do?action=getQRCode&qrcode="+a+'&size=150" width="126" height="126"><span>网校首页</span></div>'}var c=t('<div class=""></div>');c.appendTo(t("#J_fixedTools")),c.append('<a class="feedback-container right-icon-btn"><div class="hd '+i+'"></div><div class="bd"><span>'+o+"</span></div>"+s+"</a>")}function o(){var e=t('<div class="fixed-accessories"></div>');return e.appendTo(t("#J_fixedTools"))}function n(e,i){var n=t('<a class="feedback-container right-icon-btn"><div class="hd b3"></div><div class="bd"><span>问题<br>反馈</span></div></a>');return n.click(i),(new o).append(n),n}function s(){function e(){function e(e){var o=t(e),n=t.trim(o.text());"提交"==n?(o.attr("disabled",!0),i(e)):v.close()}function i(e){var i=t.trim(l.val()),n=t(".email-content",r).val(),a=/^([\w]+)(.[\w]+)*@([\w-]+\.){1,5}([A-Za-z]){2,4}$/,c=i.length,d=t(e);i==h?(o("请输入您的意见或建议"),d.attr("disabled",!1)):c>u?(o("字数超出限制,请删减后重试"),d.attr("disabled",!1)):a.test(n)||n==p?(s.html("").hide(),t.ajax({url:HTTP_SERVER+"seekFeedback.do?action=postFeedback",dataType:"jsonp",data:{content:i,email:n,pageUrl:(location.href||"").substring(0,200)},success:function(t){1==t.success?(d.text("确定"),d.parent().children().eq(1).css({display:"none"}),d.attr("disabled",!1),v.setContent("提交成功，感谢您的反馈！如有急需解决的问题，您可以直接联系网校页面右上角的技术客服，谢谢！")):v.close()},error:function(){v.close()}})):(s.html("请检查输入的邮箱格式！").show(),d.attr("disabled",!1))}function o(t){c.html(t).show(),l.addClass("error")}function n(){c.html("").hide(),l.removeClass("error")}var s=null,a=null,r=null,l=null,c=null,d=null,u=200,h="您的意见和建议将帮助我们更好的成长！",p="我们将把答复发送到您的邮箱",f=AUI.checkIfLogin(),m=AUI.curUserInfo.email;f&&m&&(p=m);var v=t.dialog({boxid:"index-pop",title:"请您留言",headStyle:{backgroundColor:"#09F"},modal:!0,content:['<div class="accessory-feedback-dialog" id="J_feedbackDialog">','<div class="title">内容:</div>',"<textarea>",h,"</textarea>",'<div class="errorContent"></div>','<div class="tip">','<div class="char_counter"><span class="used">0</span>/<span class="total">',u,"</span></div>",'<div class="email-wrap">','<div class="email">邮箱:</div>','<input type="text" class="email-content" value="',p,'" />','<div class="eamilError"></div>',"</div>"].join(""),width:453,buttons:[{text:"提交",css:{backgroundColor:"#09F"},click:function(){e(t(this))}},{text:"取消",css:{marginLeft:"10px"},click:function(){e(t(this))}}]});r=t("#J_feedbackDialog"),l=t("textarea",r),c=t(".errorContent",r),d=t(".used",r),s=t(".eamilError",r),a=t(".email-content",r),l.die().live({focus:function(){n(),t.trim(l.val())==h&&l.val("").css("color","#555")},blur:function(){0==t.trim(l.val()).length&&l.val(h).css("color","#AAA")},keyup:function(){var t=l.val().length;d.html(t),t>u?d.css("color","#f33"):d.css("color","#555")}}),a.on({focus:function(){s.html("").hide(),a.val()==p&&a.val("").css("color","#555")},blur:function(){0==a.val().length&&a.val(p).css("color","#AAA")}})}return t("#J_feedbackDialog").length?(t("#J_feedbackDialog textarea").focus(),void 0):(window.Ext?e():require(["lib/jquery/jquery.scrollto","common/global"],function(){e()}),void 0)}var a=e&&e.config();if(a&&a.hasOwnProperty&&a.hasOwnProperty("hideThisModule")&&a.hideThisModule)return a.hasOwnProperty("hideThisModuleReverse")&&a.hideThisModuleReverse&&i("app"),void 0;var r=t("input[name=organizationId]").val(),l=t("input[name=isCustom]").val();t(function(){isAbleskyDomain&&(new n("求反馈",s),a&&a.hasOwnProperty&&a.hasOwnProperty("hideThisModuleReverse")&&a.hideThisModuleReverse&&i("app")),r&&(i("app"),i("wx"))})}var i="function"==typeof define&&define.amd&&define.amd.jQuery;i&&!window.Ext?define("accessory/feedback",["module","jquery","common/global","accessory/webim"],e):e()}(window.jQuery),function(t){function e(){t.each(i,function(){this.refresh(!0)})}var i=[],o=/^url\(["']?([^"'\)]*)["']?\);?$/i,n=/\.png$/i,s=t.browser.msie&&6==t.browser.version;t(window).resize(e),t.Poshytip=function(e,i){this.$elm=t(e),this.opts=t.extend({},t.fn.poshytip.defaults,i),this.$tip=t(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},t.Poshytip.prototype={init:function(){i.push(this);var e=this.$elm.attr("title");if("[title]"==this.opts.content&&(void 0===e||""==e))return!0;if(this.$elm.data("title.poshytip",void 0!==e?e:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":t.proxy(this.mouseenter,this),"mouseleave.poshytip":t.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",t.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(t.proxy(this.clearTimeouts,this),t.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":t.proxy(this.show,this),"blur.poshytip":t.proxy(this.hide,this)})}},mouseenter:function(){return this.disabled?!0:(this.$elm.attr("title",""),"focus"==this.opts.showOn?!0:(this.clearTimeouts(),this.showTimeout=setTimeout(t.proxy(this.show,this),this.opts.showTimeout),void 0))},mouseleave:function(e){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===e.relatedTarget||jQuery.contains(this.$tip[0],e.relatedTarget)))return!0;var i=this.$elm.data("title.poshytip");return null!==i&&this.$elm.attr("title",i),"focus"==this.opts.showOn?!0:(this.clearTimeouts(),this.hideTimeout=setTimeout(t.proxy(this.hide,this),this.opts.hideTimeout),void 0)},mousemove:function(t){return this.disabled?!0:(this.eventX=t.pageX,this.eventY=t.pageY,this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow)),void 0)},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.display(),this.opts.timeOnScreen&&setTimeout(t.proxy(this.hide,this),this.opts.timeOnScreen))},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(t,e){if(!this.disabled){var i=void 0!==t;if(i){if(e||(this.opts.content=t),!this.$tip.data("active"))return}else t=this.opts.content;var o=this,n="function"==typeof t?t.call(this.$elm[0],function(t){o.update(t)}):"[title]"==t?this.$elm.data("title.poshytip"):t;this.content!==n&&(this.$inner.empty().append(n),this.content=n),this.refresh(i)}},refresh:function(e){if(!this.disabled){if(e){if(!this.$tip.data("active"))return;var i={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var a=this.$tip.css("background-image").match(o),r=this.$arrow.css("background-image").match(o);if(a){var l=n.test(a[1]);s&&l?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),a=l=!1):this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+a[1]+'")').end().find("td").eq(3).append(this.$inner),l&&!t.support.opacity&&(this.opts.fade=!1)}r&&!t.support.opacity&&(s&&n.test(r[1])&&(r=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var c=this.$tip.find("table");if(s){this.$tip[0].style.width="",c.width("auto").find("td").eq(3).width("auto");var d=this.$tip.width(),u=parseInt(this.$tip.css("min-width")),h=parseInt(this.$tip.css("max-width"));!isNaN(u)&&u>d?d=u:!isNaN(h)&&d>h&&(d=h),this.$tip.add(c).width(d).eq(0).find("td").eq(3).width("100%")}else c[0]&&c.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),r&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),e){this.asyncAnimating=!0;var p=this;this.$tip.css(i).animate({left:this.pos.l,top:this.pos.t},200,function(){p.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(e){var i=this.$tip.data("active");if(!(i&&!e||!i&&e)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(e&&this.opts.hideAniDuration||!e&&this.opts.showAniDuration)){var o={},n={};if(this.opts.slide&&this.pos.arrow){var s,a;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(s="top",a="bottom"):(s="left",a="right");var r=parseInt(this.$tip.css(s));o[s]=r+(e?0:this.pos.arrow==a?-this.opts.slideOffset:this.opts.slideOffset),n[s]=r+(e?this.pos.arrow==a?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"}this.opts.fade&&(o.opacity=e?this.$tip.css("opacity"):0,n.opacity=e?0:this.opacity),this.$tip.css(o).animate(n,this.opts[e?"hideAniDuration":"showAniDuration"])}e?this.$tip.queue(t.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),this.$tip.data("active",!i)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),i.splice(t.inArray(this,i),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var e,i,o,n,s,a,r={l:0,t:0,arrow:""},l=t(window),c={l:l.scrollLeft(),t:l.scrollTop(),w:l.width(),h:l.height()};if("cursor"==this.opts.alignTo)e=i=o=this.eventX,n=s=a=this.eventY;else{var d=this.$elm.offset(),u={l:d.left,t:d.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};e=u.l+("inner-right"!=this.opts.alignX?0:u.w),i=e+Math.floor(u.w/2),o=e+("inner-left"!=this.opts.alignX?u.w:0),n=u.t+("inner-bottom"!=this.opts.alignY?0:u.h),s=n+Math.floor(u.h/2),a=n+("inner-top"!=this.opts.alignY?u.h:0)}switch(this.opts.alignX){case"right":case"inner-left":r.l=o+this.opts.offsetX,r.l+this.tipOuterW>c.l+c.w&&(r.l=c.l+c.w-this.tipOuterW),("right"==this.opts.alignX||"center"==this.opts.alignY)&&(r.arrow="left");break;case"center":r.l=i-Math.floor(this.tipOuterW/2),r.l+this.tipOuterW>c.l+c.w?r.l=c.l+c.w-this.tipOuterW:r.l<c.l&&(r.l=c.l);break;default:r.l=e-this.tipOuterW-this.opts.offsetX,r.l<c.l&&(r.l=c.l),("left"==this.opts.alignX||"center"==this.opts.alignY)&&(r.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":r.t=a+this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="top"),r.t+this.tipOuterH>c.t+c.h&&(r.t=n-this.tipOuterH-this.opts.offsetY,"top"==r.arrow&&(r.arrow="bottom"));break;case"center":r.t=s-Math.floor(this.tipOuterH/2),r.t+this.tipOuterH>c.t+c.h?r.t=c.t+c.h-this.tipOuterH:r.t<c.t&&(r.t=c.t);break;default:r.t=n-this.tipOuterH-this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="bottom"),r.t<c.t&&(r.t=a+this.opts.offsetY,"bottom"==r.arrow&&(r.arrow="top"))}this.pos=r}},t.fn.poshytip=function(e){if("string"==typeof e){var i=arguments,o=e;return Array.prototype.shift.call(i),"destroy"==o&&this.die("mouseenter.poshytip").die("focus.poshytip"),this.each(function(){var e=t(this).data("poshytip");e&&e[o]&&e[o].apply(e,i)})}var n=t.extend({},t.fn.poshytip.defaults,e);if(t("#poshytip-css-"+n.className)[0]||t(['<style id="poshytip-css-',n.className,'" type="text/css">',"div.",n.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",n.className," table, div.",n.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",n.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",n.bgImageFrameSize,"px;width:",n.bgImageFrameSize,"px;overflow:hidden;}","div.",n.className," td.tip-right{background-position:100% 0;}","div.",n.className," td.tip-bottom{background-position:100% 100%;}","div.",n.className," td.tip-left{background-position:0 100%;}","div.",n.className," div.tip-inner{background-position:-",n.bgImageFrameSize,"px -",n.bgImageFrameSize,"px;}","div.",n.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),n.liveEvents&&"none"!=n.showOn){var s=t.extend({},n,{liveEvents:!1});switch(n.showOn){case"hover":this.live("mouseenter.poshytip",function(){var e=t(this);e.data("poshytip")||e.poshytip(s).poshytip("mouseenter")});break;case"focus":this.live("focus.poshytip",function(){var e=t(this);e.data("poshytip")||e.poshytip(s).poshytip("show")})}return this}return this.each(function(){new t.Poshytip(this,n)})},t.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300}}(jQuery),define("lib/jquery/jquery.poshytip",function(){}),define("common/global",["module","jquery","lib/shiv/json2","lib/jquery/jquery.cookie","common/site-nav"],function(t,e,i,o,n){var s=t.config(),a=window.AUI||{};a._auiEvent={},a._addAuiEvent=function(t,e){var i=a._auiEvent[t];void 0==i&&(a._auiEvent[t]=[]),a._auiEvent[t].push(e)},a._runAuiEvent=function(t){var e=a._auiEvent[t];if(e.length>0)for(var i=0;i<e.length;i++){var o=e[i];o()}},window.console||(window.console={log:function(){}}),isAbleskyDomain&&(console.log(":::'###::::'########::'##:::::::'########::'######::'##:::'##:'##:::'##:\n::'## ##::: ##.... ##: ##::::::: ##.....::'##... ##: ##::'##::. ##:'##::\n:'##:. ##:: ##:::: ##: ##::::::: ##::::::: ##:::..:: ##:'##::::. ####:::\n:##:::. ##: ########:: ##::::::: ######:::. ######:: #####::::::. ##::::\n:#########: ##.... ##: ##::::::: ##...:::::..... ##: ##. ##:::::: ##::::\n:##.... ##: ##:::: ##: ##::::::: ##:::::::'##::: ##: ##:. ##::::: ##::::\n:##:::: ##: ########:: ########: ########:. ######:: ##::. ##:::: ##::::\n"),console.log("如果对我们感兴趣，请加入我们，为能力天空添砖加瓦! %chttp://www.ablesky.com/commonRedirect.do?action=toCareers","color: #09F")),function(){var t=navigator.userAgent.toLowerCase(),e="",i=t.indexOf("firefox")>-1,o=t.indexOf("360se")>-1,n=t.indexOf("tencenttraveler")>-1,s=t.indexOf("maxthon")>-1,r="",l=/msie/.test(t),c=/msie 6/.test(t),d=/msie 7/.test(t),u=/msie 8/.test(t),h=/msie 9.0/.test(t);o||n||s?(l&&(c?r=" IE6":d?r=" IE7":u&&(r=" IE8")),e=o?"360":n?"TT":"Maxthon",e+=r):e=i?"FireFox":c?"IE6":d?"IE7":u?"IE8":"other",a.UA={isFF:i,isIE6:c,isIE7:d,isIE8:u,isIE9:h,isMaxthon:s,isTT:n,is360:o,browser:e}}(),Array.remove=function(t,e,i){var o=t.slice((i||e)+1||t.length);return t.length=0>e?t.length+e:e,t.push.apply(t,o)},e.ajaxSetup({jsonp:"jsonp",cache:!1,jsonpCallback:function(){return"ablesky_"+jQuery.now()}});var r=function(t){var e,i=window.location.search,o=new RegExp("(?:[?|&]|^)"+t+"=([^&?]*)","ig");return(e=o.exec(i))?e[1]:null},l=function(t){var e,i=s.staticURISearch,o=new RegExp("(?:[?|&]|^)"+t+"=([^&?]*)","ig");return(e=o.exec(i))?e[1]:null},c=function(t,e){var i=navigator.userAgent,o=i.indexOf("opera")>-1;try{"string"==typeof t?t=parseFloat(t).toFixed(e):"number"==typeof t&&(t=1>t&&!o&&i.indexOf("msie")>-1?((t+1).toFixed(e)-1).toFixed(e):t.toFixed(e))}catch(n){t=0}return t},d=function(t){var e=t?t:window.location.hostname,i=e.split(".");return i.shift(),i.join(".")},u=function(t){return null===t||void 0===t||""===t};a.curUserInfo=s.USER||a.curUserInfo,a.getCurUserInfo=function(t,i){if(i=u(i)?"":i,a.curUserInfo.counter>5)return"GUEST";if(a.curUserInfo.loaded&&1!=t)return a.curUserInfo;var o={};i&&(o.ASUSS=i);try{e.ajax({url:"http://"+window.location.host+"/getCurrentUser.do"+(i?"?ASUSS="+i:""),type:"GET",dataType:"json",async:!1,cache:!1}).done(function(t){return t&&1==t.success&&(t.loaded=!0,t.counter=0,a.curUserInfo=t,setTimeout(function(){var i="",o="",n=HTTP_SERVER+"accountLoginRedirect.do?action=toMyAccount&tab=accountInfo&firstLogin=true",s=t.tip||0,r=isAbleskyDomain?"Ablesky":"",l=t.username||"",c=a.cookie(!1,l+"closeTip");if(!c){switch(s-0){case 0:return;case 2:i="欢迎您加入"+r+"！请登录您的注册邮箱，查收我们的邮件，激活您的帐号！";break;case 3:i="欢迎您加入"+r+'！由于您的帐户由机构创建，为保证信息安全，请您<a href="'+n+'" style="color:#fff;text-decoration: underline;">立即修改密码</a>！';break;case 1:i="欢迎您加入"+r+'！由于您的帐户由机构创建，密码和邮箱尚未修改，为保证信息安全，请您<a href="'+n+'" style="color:#fff;text-decoration: underline;">立即修改帐户信息</a>！';break;default:return}o=['<div style="width:100%; height:35px;background-color: #3399FE;" id="J_top-tips">','<p class="clearfix" style="margin: 0 auto; width: 1000px; color:#FFF; height:35px; line-height:35px;">','<span style="display:block; float:left;">',i,"</span>",'<a href="javascript:void(0)" style="display:block; float:right; margin-top:6px; width:20px; height:20px;background: url(',IMG_PATH,'/market/head/close-blue_8be2ee63.png) no-repeat right 0 transparent;"></a>',"</p></div>"].join(""),e("#J_top-tips a").live("click",function(){e("#J_top-tips").hide(),a.cookie(!1,l+"closeTip",1)}),e(document.body.firstChild).before(e(o))}},0)),a.curUserInfo}).fail(function(){a.curUserInfo.counter++})}catch(n){a.curUserInfo.counter++}return a.curUserInfo},a.checkIfLogin=function(t){var e=!0;return e=1==t?"GUEST"!=a.getCurUserInfo().username:a.curUserInfo.isGuest,!e};var h=function(){e.ajax({url:PASSPORT_SERVER+"check.do?action=check",dataType:"jsonp"}).done(function(t){var e=t.ASUSS;t.success&&""!=e&&"false"!=e&&(a.getCurUserInfo(!0,e),window.location.reload())})};e.ajax({url:PASSPORT_SERVER+"keep.do?action=keepChat",dataType:"jsonp"}).done(function(){isAbleskyDomain||a.checkIfLogin()||h()}),window.setInterval(function(){if("GUEST"!=a.curUserInfo.username){e.ajax({url:PASSPORT_SERVER+"keep.do?action=chat",dataType:"jsonp"});var t=document.createDocumentFragment(),i=document.createElement("img");i.src="s.gif?_="+e.now(),t.appendChild(i),e(i).load(function(){t.removeChild(i),t=i=null})}},54e4),setTimeout(function(){require(["common/ablesky-ga","analytics/ableanalytics"])},0);var p=function(t){t=t||{};var i=null,o="J_footOpenTip"+p.uid,n=['<div id="'+o+'" class="foot-system-tip" style="z-index:'+p.uid++ +';">'+'<div class="foot-tip-container">','<a class="close foot-tip-close" href="javascript:;"></a>',t.isCommonNotice?'<p class="foot-tip-txt">'+t.noticeText+"</p>":'<div class="foot-tip-txt">'+t.tipText+"</div>"+'<div class="foot-tip-action">'+'<a class="tip-button foot-tip-close" target="_blank" href="'+t.buttonLink+'">马上查看</a></div>',"</div></div>",'<input type="hidden" id="isClose" value="'+(t.closeData?t.closeData:"")+'" />'].join("");e("body").append(n);var s=e("#"+o),a=e(".foot-tip-close",s),r=function(){i=setTimeout(function(){s.animate({right:-400},1500,function(){s.remove()})},6e3)};a.click(function(){t.closeCallback&&t.closeCallback(e("#isClose").val()),s.remove()}),s.animate({right:0},1500,function(){}),s.bind({mouseover:function(){clearTimeout(i),s.stop(),s.animate({right:0},0)},mouseout:function(){t.isCommonNotice&&r()}}),t.isCommonNotice&&r()};a.showFootTip=p,p.uid=1400,setTimeout(function(){a.checkIfLogin()&&e.ajax({url:HTTP_SERVER+"taskTrigger.do",dataType:"jsonp"}).done(function(t){if(null!=t.isCompleted&&t.notifyMessageList)for(var i,o=0;i=t.notifyMessageList[o];o++)i[0]===!1&&p({tipText:i[2],showButton:t.isCompleted,buttonLink:(isAbleskyDomain?HTTP_SERVER:"")+"studyCenterRedirect.do?action=loadStudyCenterPage",buttonText:"立即前往我的课程",closeData:i[1],closeCallback:function(t){e.ajax({url:HTTP_SERVER+"studyCenterRedirect.do?action=deleteLoadStudyCenterNotify&orgStudentId="+t,dataType:"jsonp",success:function(){}})}});if(t.success===!0&&t.notifyMessageList)for(var i,o=0;i=t.notifyMessageList[o];o++)i[0]===!0&&p({isCommonNotice:!0,noticeText:i[2]})}),require(["lib/jquery/jquery.dialog"],function(){require(["accessory/webim"]),require(["accessory/feedback"])})},100);var f=function(t,e){var i,o,n,s,a,r,l,c=parseFloat(t);return e=arguments.length<2?2:e,c=c.toFixed(e),o=String(c),n=o.split("."),o=n[0],l=n[1],s=o.length,4>s?c:(i=s%3,a=0==i?"":o.slice(0,i)+",",r=o.slice(i),r=r.replace(/(.{3})/g,"$1,"),r=r.slice(0,-1),0===e?a+r:a+r+"."+l)
},m=function(){require(["lib/jquery/jquery.poshytip"],function(){e(".ablesky-colortip").poshytip({className:"poshytip",alignTo:"target",alignX:"center",offsetY:5,slide:!1,liveEvents:!0,showTimeout:50,hideTimeout:50,showAniDuration:200,hideAniDuration:150}),e(".ablesky-colortip-left").poshytip({className:"poshytip-left",alignTo:"target",alignX:"inner-left",offsetX:0,offsetY:5,slide:!1,liveEvents:!0,showTimeout:50,hideTimeout:50,showAniDuration:200,hideAniDuration:150}),e(".ablesky-colortip-right").poshytip({className:"poshytip-right",alignTo:"target",alignX:"inner-right",offsetX:0,offsetY:5,slide:!1,liveEvents:!0,showTimeout:50,hideTimeout:50,showAniDuration:200,hideAniDuration:150})})},v=function(t,e){if(t=t||window.location.href,a.checkIfLogin())return!0;if(e){for(var i=Array.prototype.slice.call(arguments,2),o=0;o<i.length;o++)i[o]=encodeURIComponent(i[o]);var n="funName="+e+"&params="+i.join(",")+"&fromurl="+encodeURIComponent(t);window.location.href=isAbleskyDomain?HTTP_SERVER+"login.do?"+n:BASE_PATH+"login.do?"+n}else window.location.href=isAbleskyDomain?HTTP_SERVER+"login.do?fromurl="+encodeURIComponent(t):BASE_PATH+"login.do?fromurl="+encodeURIComponent(t)},g=function(){if(a.checkIfLogin()){var t={},e=a.cookie(!1,"funName"),i=a.cookie(!1,"params")||"";if(e){a.webim&&(t.chatWithMe=a.webim.chatWithMe),t.popPrivateLetter=a.popPrivateLetter,i=i.split(",");for(var o=0;o<i.length;o++)i[o]=decodeURIComponent(i[o]);t[e]&&(t[e].apply(this,i),a.cookie(!1,"funName",null),a.cookie(!1,"params",null))}}};return setTimeout(function(){g()},800),a.cookie=function(t,i,o){var n,s,a={path:"/",domain:d()},r="AUI_SC";if(arguments.length<2)throw new Error("Missing arguments");switch(t){case!0:r="AUI_EC",a.expires=365;break;case!1:r="AUI_SC";break;default:throw new TypeError("The first argument must be Boolean")}if("string"!=typeof i)throw new TypeError("illegal name");return n=e.cookie(r)||"{}",s=JSON.parse(n),2==arguments.length?s[i]:(arguments.length>2&&(null===o||void 0===o?(s[i]=null,delete s[i]):s[i]=o,e.cookie(r,JSON.stringify(s),a)),void 0)},window.AbleSky=window.AUI=a,function(){if(isAbleskyDomain&&a.checkIfLogin()){var t="";e.ajax({url:"getCurrentUserTips.do",type:"POST",dataType:"json",success:function(t){if(t.success&&t.status&&"know"!==t.status){var i=t.status,o="",n="";switch(i){case"approve":o="您申请的免费网校已审核通过，网校已经成功开通",n='<a class="applyClose" href="javascript:;" style="display:block;margin-top:-27px; float:right;width:20px; height:20px;background:url('+IMG_PATH+'/market/head/close-blue_8be2ee63.png) no-repeat 0 0 transparent;"></a>';break;case"processing":o="您申请的免费网校套餐正在审核中，开通后会通过邮件或短信通知您，同时回电话通知您！";break;case"decline":o="您申请的免费网校套餐审核未通过，"+t.failRes,n='<a href="organizationApplyRedirect.do?action=toEditOrganizationApply&property='+t.property+'" class="greenbtn25"  style="display:block;margin:-30px 100px 0 0; float:right;"><span class="greenbtn25_text">重新编辑</span></a>'}"fixed"==t.chargeType&&"processing"==t.status?tpl="":(tpl=['<div style="width:100%; height:35px;background-color: #3399FE;border-top: 2px solid #2277CC;" id="J_apply-tips">','<p class="clearfix" style="margin: 0 auto; width: 1000px; color:#FFF; height:35px; line-height:35px;">','<span title="'+o+'" style="display:block;text-align:center;overflow: hidden;max-width:800px;white-space: nowrap;text-overflow: ellipsis;">',o,"</span>",n,"</p></div>"].join(""),e(document.body.firstChild).before(e(tpl)))}}}),t&&clearTimeout(t);var t=setTimeout(function(){var t=e("#J_apply-tips .applyClose");t.length&&e("#J_apply-tips").on("click",".applyClose",function(){e.ajax({url:"organizationApply.do?action=closeNoticeOfApply",type:"POST",dataType:"json",success:function(t){t.success&&e("#J_apply-tips").remove()}})})},500)}}(),{isEmpty:u,fixedNumber:c,queryString:r,queryStaticURIString:l,getFLDomain:d,initTip:m,formatNumber:f,switchToLoginPage:v,navigation:n}}),function(t,e,i){function o(t){var e={},o=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!o.test(i.name)&&(e[i.name]=i.value)}),e}function n(t,o){var n=this,s=i(n);if(n.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){if(s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id")),t===!0)return s[0].value=o;s.focus()}else n.value="",s.removeClass("placeholder"),n==e.activeElement&&n.select()}function s(){var t,e=this,s=i(e),a=this.id;if(""==e.value){if("password"==e.type){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(r){t=i("<input>").attr(i.extend(o(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":a}).bind("focus.placeholder",n),s.data({"placeholder-textinput":t,"placeholder-id":a}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",a).show()}s.addClass("placeholder"),s[0].value=s.attr("placeholder")}else s.removeClass("placeholder")}var a,r,l="placeholder"in e.createElement("input"),c="placeholder"in e.createElement("textarea"),d=i.fn,u=i.valHooks;l&&c?(r=d.placeholder=function(){return this},r.input=r.textarea=!0):(r=d.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":n,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},r.input=l,r.textarea=c,a={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,o){var a=i(t);return a.data("placeholder-enabled")?(""==o?(t.value=o,t!=e.activeElement&&s.call(t)):a.hasClass("placeholder")?n.call(t,!0,o)||(t.value=o):t.value=o,a):t.value=o}},l||(u.input=a),c||(u.textarea=a),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(n);setTimeout(function(){t.each(s)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("lib/jquery/jquery.placeholder",function(){});