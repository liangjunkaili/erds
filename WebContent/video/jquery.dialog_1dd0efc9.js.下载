/*! ablejs - v0.2.0 - Thursday, June 30th, 2016, 7:19:06 PM
* http://www.ablesky.com
* Copyright (c) 2016 frontend@ablesky.com; Licensed  */
!function(t){function e(){var e=this;this._onbox=!1,this._opening=!1,this.zIndex=1e4,this.length=function(){return n.length},this.open=function(t){if(e._opening=!0,"undefined"==typeof t&&(t={}),t.boxid)for(var i=0;i<n.length;i++)if(n[i].dh.attr("id")==t.boxid){n[i].close();break}t.zIndex=e.zIndex,e.zIndex+=10;var o=new s(t);return o.dh.click(function(){e._onbox=!0}),n.push(o),"center"!=o.options.position&&o.setElementPosition(),o.mh&&o.mh.css({width:o.bwidth(),height:o.bheight()}),o},this.close=function(){var t=this.getTopBox();0!=t&&t.close()},this.getTopBox=function(){return n.length>0?n[n.length-1]:!1},t(window).scroll(function(){if(n.length>0)for(i=0;i<n.length;i++){var t=n[i];"center"!=t.options.position&&t.setElementPosition(),t.mh&&t.mh.css({width:t.bwidth(),height:t.bheight()})}}).resize(function(){if(n.length>0){var t=e.getTopBox();t.mh&&t.mh.css({width:t.bwidth(),height:t.bheight()})}}),t(document).click(function(t){if(2==t.button)return!0;if(n.length>0){var i=e.getTopBox();e._opening||e._onbox||!i.options.clickClose||i.close()}e._opening=!1,e._onbox=!1})}var n=[],o=function(){for(var t,e=0;t=arguments[e];e++)if("string"==typeof t&&t.length>0)try{(new Image).src=t}catch(i){}};o(IMG_PATH+"/market/dialog/dialog-tl_eeac24e2.png",IMG_PATH+"/market/dialog/dialog-tr_1e88e489.png",IMG_PATH+"/market/dialog/dialog-bl_47bef4db.png",IMG_PATH+"/market/dialog/dialog-br_3879e159.png",IMG_PATH+"/market/dialog/dialog-square_9c60adba.png");var s=function(e){var o=this;this.options={},this.dh=null,this.mh=null,this.dc=null,this.df=null,this.db=null,this.selector=null,this.ajaxurl=null,this._dragging=!1,this._options=e||{},this._content=e.content||"",this.event={},this._defaults={boxid:null,boxclass:null,title:"",headStyle:"",bodyStyle:"",footStyle:"",width:0,height:0,timeout:0,draggable:!0,modal:!1,position:"center",buttons:[],clickClose:!1,zIndex:1e4,close:null,closeOnEscape:!0,open:null},this.initOptions=function(){o._options=o._options||{},o._options.title=o._options.title||"",o._options.boxclass=o._options.boxclass,o.options=t.extend({},o._defaults,o._options),o._options=null,o._defaults=null},this.initBox=function(){var e=['<div class="dialog-box">','<table class="dialog-table">',"<tr>",'<td class="td-tl"></td>','<td class="td-mm"></td>','<td class="td-tr"></td>',"</tr>","<tr>",'<td class="td-mm"></td>','<td class="td-content">','<div class="dialog-header">','<h3 class="dialog-title"></h3>','<a title="关闭" class="dialog-close">×</a>',"</div>",'<div class="dialog-content"></div>','<div class="dialog-button-container"></div>',"</td>",'<td class="td-mm"></td>',"</tr>","<tr>",'<td class="td-bl"></td>','<td class="td-mm"></td>','<td class="td-br"></td>',"</tr>","</table>","</div>"].join("");o.dh=t(e).appendTo("body").css({position:"absolute",overflow:"hidden",zIndex:o.options.zIndex}),o.dc=o.find(".dialog-content"),o.dt=o.find(".dialog-title"),o.dr=o.find(".dialog-header"),o.db=o.find(".dialog-button-container"),o.options.boxid&&o.dh.attr("id",o.options.boxid),o.options.boxclass&&o.dh.addClass(o.options.boxclass),o.options.height>0&&o.dc.css("height",o.options.height),o.options.width>0&&o.dh.css("width",o.options.width),"object"==typeof o.options.headStyle&&o.dr.css(t.extend({},o.options.headStyle)),"object"==typeof o.options.bodyStyle&&o.dc.css(t.extend({},o.options.bodyStyle)),"object"==typeof o.options.footStyle&&o.db.css(t.extend({},o.options.footStyle)),o.dh.bgiframe()},this.initMask=function(){o.options.modal&&(t.browser.msie?(h="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,w="CSS1Compat"==document.compatMode?document.documentElement.clientWidth:document.body.clientWidth):(h=o.bheight(),w=o.bwidth()),o.mh=t('<div class="dialog-mask"></div>').appendTo("body").css({width:w,height:h,zIndex:o.options.zIndex-1}).bgiframe())},this.initContent=function(){for(var e,i,n=o.options.buttons,s=0;i=n[s];s++)e=document.createElement("button"),e._click=i.click?i.click:o.close,i.css&&i.css.backgroundColor&&(i.css.color="#fff"),t(e).attr("type","button").text(i.text).css(t.extend({},{marginLeft:s>0?30:0},i.css)).click(function(t){t.preventDefault(),this._click()}),o.db.append(e);o.options.title?o.dt.html(o.options.title):o.dt.hide(),0===o.options.buttons.length&&o.dh.find(".dialog-button-container").hide(),o.setContent(o._content),o.show(),o.event.open()},this.initEvent=function(){o.dh.find(".dialog-close, .dialog-cancel").unbind("click").click(function(t){t.preventDefault(),o.close()}),o.dh.attr("tabIndex",-1).css("outline",0).keydown(function(t){o.options.closeOnEscape&&t.keyCode&&27===t.keyCode&&(o.close(t),t.preventDefault())}),o.options.timeout>0&&window.setTimeout(o.close,1e3*o.options.timeout),this.drag()},this.setOnclose=function(t){o.options.close=t},this.drag=function(){o.options.draggable&&o.options.title&&o.dr.css({cursor:"move"}).mousedown(function(e){var i=this,n=o.dh.position().left,s=o.dh.position().top,a=e.clientX,d=e.clientY,l=o.dh.width(),c=o.dh.height(),r=o.bwidth(),h=o.bheight();i.setCapture&&i.setCapture(),t(document).mousemove(function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var e=Math.max(n+t.clientX-a,0),i=Math.max(s+t.clientY-d,0),e=Math.min(e,r-l),i=Math.min(i,h-c);o.dh.css({left:e,top:i})}).mouseup(function(){i.releaseCapture&&i.releaseCapture(),t(document).unbind("mousemove"),t(document).unbind("mouseup")})})},this.event.open=function(){"function"==typeof o.options.open&&o.options.open(o)},this.show=function(){o.options.buttons.length>0&&o.dh.find(".dialog-button-container").show(),"center"==o.options.position?o.setCenterPosition():o.setElementPosition(),o.dh.show(),o.mh&&o.mh.show()},this.hide=function(t){o.dh.hide(t)},this.find=function(t){return o.dh.find(t)},this.setWidth=function(t){o.dh.width(t)},this.setTitle=function(t){o.dt.html(t)},this.getTitle=function(){return o.dt.html()},this.setContent=function(t){o.dc.html(t),o.setCenterPosition()},this.getContent=function(){return o.dc.html()},this.close=function(){for("function"==typeof o.options.close&&o.options.close(o),i=0;i<n.length;i++)if(n[i].dh.get(0)==o.dh.get(0)){n.splice(i,1);break}o.hide(),o.dh.remove(),o.mh&&o.mh.remove()},this.bheight=function(){if(t.browser.msie&&t.browser.version<7){var e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return i>e?t(window).height():e}return t(document).height()},this.bwidth=function(){if(t.browser.msie&&t.browser.version<7){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return i>e?t(window).width():e}return t(document).width()},this.setCenterPosition=function(){var e=t(window),i=t(document),n=i.scrollTop(),s=i.scrollLeft();n+=(e.height()-o.dh.height())/2,s+=(e.width()-o.dh.width())/2,o.dh.css({top:n,left:s})},this.setElementPosition=function(){var e=t(o.options.position.refele),i=o.options.position.reftop||0,n=o.options.position.refleft||0,s="undefined"==typeof o.options.position.adjust?!0:o.options.position.adjust,a=e.offset().top+e.height(),d=e.offset().left,l=document.documentElement.clientWidth||document.body.clientWidth,c=document.documentElement.clientHeight||document.body.clientHeight,r=document.documentElement.scrollTop||document.body.scrollTop,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=r+c,p=h+l;s&&d+o.dh.width()>p&&(d=p-o.dh.width()-1),s&&a+o.dh.height()>u&&(a=u-o.dh.height()-1),d=Math.max(d+n,0),a=Math.max(a+i,0),o.dh.css({top:a,left:d})},this.initOptions(),this.initMask(),this.initBox(),this.initContent(),this.initEvent()};t.extend({dialog:(new e).open})}(jQuery),function(t){function e(t){return t&&t.constructor===Number?t+"px":t}t.fn.bgiframe=t.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(i){i=t.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},i);var n='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+i.src+'"'+'style="display:block;position:absolute;z-index:-1;'+(i.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==i.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":e(i.top))+";"+"left:"+("auto"==i.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":e(i.left))+";"+"width:"+("auto"==i.width?"expression(this.parentNode.offsetWidth+'px')":e(i.width))+";"+"height:"+("auto"==i.height?"expression(this.parentNode.offsetHeight+'px')":e(i.height))+";"+'"/>';return this.each(function(){0===t(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(n),this.firstChild)})}:function(){return this},t.fn.bgIframe=t.fn.bgiframe}(jQuery);