/*! ablejs - v0.2.0 - Thursday, November 10th, 2016, 6:37:04 PM
* http://www.ablesky.com
* Copyright (c) 2016 frontend@ablesky.com; Licensed  */
!function(){"use strict";function e(){function e(e,t){var i=document.createElement("script"),a=document.head||document.getElementsByTagName("head")[0]||document.documentElement;i.setAttribute("type","text/javascript"),i.src=e,i.onload=i.onreadystatechange=function(){(!i.readyState||/loaded|complete/.test(i.readyState))&&t&&"function"==typeof t&&t()},a.appendChild(i)}function t(e){window.AbleSky_Player_getVerifyName=function(){var e=AUI.curUserInfo.username,t=RSA.encrypted(e);return{userName:e,encryUserName:t}},s.showNextVideo=function(){e.nextVideo&&"function"==typeof e.nextVideo&&e.nextVideo()},s.showPrevVideo=function(){e.prevVideo&&"function"==typeof e.prevVideo&&e.prevVideo()},s.resizeVideo=function(e){var t=document.getElementById(n+"_api");t&&(t.parentNode.style.height="100%"===e?e:e+"px")},s.chooseBestIdc=function(){window.location.href="testRedirect.do?action=toPage&page=speedVideo&courseId="+e.courseId+"&snapshotInfoId="+e.snapshotInfoId+"&ref="+encodeURIComponent(window.location.href)},s.bestNetListSel=function(t){console.log("flash change idc to:"+t),e.bestNetListSel&&e.bestNetListSel(t)},s.onend=function(){i.onend()}}function a(){var e=document.getElementById(n+"_api");e&&e.pauseInterface&&e.pauseInterface()}function o(){var e=document.getElementById(n+"_api");e&&e.playInterface&&e.playInterface()}var s={},r=function(){var e=navigator.appVersion.indexOf("MSIE")>=0,t=!1;if(!/webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent))if(e)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(i){t=!0}finally{}else navigator.plugins["Shockwave Flash"]||(t=!0);return t},n="",l=function(e){var t=d(),i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),i[2]=parseInt(i[2],10),t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1},d=function(){var e=[0,0,0],t=window,i=navigator;if("undefined"!=typeof i.plugins&&"object"==typeof i.plugins["Shockwave Flash"]){var a=i.plugins["Shockwave Flash"].description;a&&(a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(a.replace(/^(.*)\..*$/,"$1"),10),e[1]=parseInt(a.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/r/.test(a)?parseInt(a.replace(/^.*r(.*)$/,"$1"),10):0)}else if("undefined"!=typeof t.ActiveXObject){var o=null,s=!1;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(r){try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=[6,0,21],o.AllowScriptAccess="always"}catch(r){6==e[0]&&(s=!0)}if(!s)try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(r){}}if(!s&&o)try{a=o.GetVariable("$version"),a&&(a=a.split(" ")[1].split(","),e=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}catch(r){}}return e},c=function(t){t.bitRate?"":t.bitRate="",t.length?"":t.length="",t.timesLimit?"":t.timesLimit="",t.timesLeft?"":t.timesLeft="",t.lastPlayTime?"":t.lastPlayTime="",t.lastPlayPage?"":t.lastPlayPage="",t.visitorType?"":t.visitorType="",t.courseAuthorityFlag?"":t.courseAuthorityFlag="",t.isAudio?"":t.isAudio=!1,t.type?"":t.type="",t.isOrg?"":t.isOrg=!1,t.width="100%"==t.width?"100%":t.width,t.height="100%"==t.height?"100%":t.height,t.isOutside=!!t.isOutside,t.orginalIdc?"":t.orginalIdc="",t.isAbleskyDomain?"":t.isAbleskyDomain=!1,n=t.id;var i=window.location.href,a=i.split("?")[0],o=JS_PATH+"/flowplayer3.1/NoShortDemo.swf",s={};if(r()||!l("10.1.0"))return document.getElementById(n).innerHTML='<div class="flash-down-tip-container"><img class="flash-down-tip-bg" src="'+IMG_PATH+'/courseview/flash-download-bg_b26ccc2e.png" /><p class="flash-down-tip-text">您没有安装flash player或flash player版本太低，<a class="flash-down-tip-link" href="http://get.adobe.com/cn/flashplayer/">请点此安装最新的flash player</a></p></div>',void 0;if(t.isUpload&&"false"!==t.isUpload?t.mutilpVideo?(s=t,o=JS_PATH+"/ableskyPlayer/MultipVideoPlayer.swf"):t.threeWins?(s={serverRoot:t.serverRoot,dataId:t.dataId,documentDataId:t.documentDataId,volumeId:t.volumeId,courseId:t.courseId,editModel:t.editModel,isAdmin:t.isAdmin,preview:t.preview,playCourseId:t.playCourseId,pcid:t.pcid,mediaServerRoot:t.mediaServerRoot,serverType:t.serverType,bitRate:t.bitRate,length:t.length,timesLimit:t.timesLimit,timesLeft:t.timesLeft,lastPlayTime:t.lastPlayTime,lastPlayPage:t.lastPlayPage,visitorType:t.visitorType,courseAuthorityFlag:t.courseAuthorityFlag,autoPlay:t.autoPlay,isOutside:t.isOutside,pageLocation:t.pageLocation,grouponid:t.grouponid,type:t.type,orginalIdc:t.orginalIdc,isOrg:t.isOrg},o=JS_PATH+"/ableskyPlayer/ChapterPlayer.swf"):(s={url:t.path,baseUrl:BASE_PATH,scaling:t.scaling?t.scaling:"fit",autoPlay:t.autoPlay?!0:!1,isLocal:1==t.isLocal?!0:!1,playCourseId:t.playCourseId,pcid:t.pcid,serverType:t.serverType,mediaServerRoot:t.mediaServerRoot,bitRate:t.bitRate,length:t.length,timesLimit:t.timesLimit,timesLeft:t.timesLeft,lastPlayTime:t.lastPlayTime,lastPlayPage:t.lastPlayPage,visitorType:t.visitorType,courseAuthorityFlag:t.courseAuthorityFlag,isAudio:t.isAudio,isOutside:t.isOutside,pageLocation:a,grouponid:t.grouponid,type:t.type,isOrg:t.isOrg,orginalIdc:t.orginalIdc,mobileH5Type:"singleVideo"},o=JS_PATH+"/ableskyPlayer/ASLoader.swf?type=video"):(t.document&&t.isNew&&("on"==t.isNew?(o=JS_PATH+"/ableskyPlayer/ASLoader.swf?type=document",s={url:t.path,currentPath:BASE_PATH,playCourseId:t.playCourseId,pcid:t.pcid,length:t.length,timesLimit:t.timesLimit,timesLeft:t.timesLeft,lastPlayPage:t.lastPlayPage,visitorType:t.visitorType,courseAuthorityFlag:t.courseAuthorityFlag,autoPlay:t.autoPlay,mediaServerRoot:t.mediaServerRoot,isOutside:t.isOutside,pageLocation:a,grouponid:t.grouponid,type:t.type,isOrg:t.isOrg,orginalIdc:t.orginalIdc,wmode:"opaque"}):"off"==t.isNew&&(o=JS_PATH+"/documentPlayer/DocumentPlayer.swf",s={url:t.path,currentPath:BASE_PATH,playCourseId:t.playCourseId,pcid:t.pcid,isOutside:t.isOutside,pageLocation:a,grouponid:t.grouponid,type:t.type,isOrg:t.isOrg,orginalIdc:t.orginalIdc,wmode:"opaque"})),t.swf&&(o=JS_PATH+"/swfPlayer/swfPlayer.swf",s={url:t.path,currentPath:BASE_PATH,playCourseId:t.playCourseId,pcid:t.pcid,length:t.length,timesLimit:t.timesLimit,timesLeft:t.timesLeft,lastPlayPage:t.lastPlayPage,visitorType:t.visitorType,courseAuthorityFlag:t.courseAuthorityFlag,autoPlay:t.autoPlay,channelId:t.channelId,isOutside:t.isOutside,pageLocation:a,grouponid:t.grouponid,type:t.type,orginalIdc:t.orginalIdc,isOrg:t.isOrg})),/webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent))e(JS_PATH+"/ableskyPlayer/html5Player_1378f7e7.js?v="+FLASH_VERSION,function(){AUI.Flash.genHTML5Player(n,s)});else try{flowplayer(n,{src:o+(/\?/.test(o)?"&":"?")+"v="+FLASH_VERSION,width:"100%",height:"100%",wmode:"opaque"},{clip:s})}catch(d){}};return window.AUIPlayer||(window.AUIPlayer=s),{needFlash:r,hasFlashVersion:l,flowPlayer:c,initVideoAPI:t,pauseVideo:a,playVideo:o,playerCallback:i}}var t="function"==typeof define&&define.amd&&define.amd.jQuery;t&&!window.Ext?define(["common/Barrett","common/BigInt","common/RSA","flowplayer3.5/js/flowplayer-3.1.0.min"],e):e();var i={onend:function(){}}}();